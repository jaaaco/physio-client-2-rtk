(this["webpackJsonpphysio-client-2-rtk"]=this["webpackJsonpphysio-client-2-rtk"]||[]).push([[0],{416:function(e,t,a){e.exports=a(705)},423:function(e,t,a){},705:function(e,t,a){"use strict";a.r(t);var n,r=a(19),c=a.n(r),i=a(27),u=a(0),l=a.n(u),o=a(68),s=a.n(o),m=(a(422),a(21)),d=a(747),p=a(42),f=(a(423),a(215)),b=a(29),v=Object(b.d)({name:"flash",initialState:[],reducers:{add:{reducer:function(e,t){var a=t.payload;return[].concat(Object(f.a)(e),[a])}},remove:function(e,t){var a=t.payload;return e.filter((function(e){return e.id!==a}))}}}),E=v.actions,j=v.reducer,h=function(e){return e.flash},O=a(26),w=function(){var e=Object(O.c)(h),t=Object(O.b)();if(!e)return null;var a={info:{label:"Informacja",icon:"info"},success:{label:"Sukces!",icon:"check"},error:{label:"B\u0142\u0105d!",icon:"times"},warning:{label:"Ostrze\u017cenie",icon:"warning"}};return l.a.createElement("div",{className:"Flash"},e.map((function(e){var n=e.id,r=e.type,c=e.text;return l.a.createElement(d.a,Object.assign({onDismiss:function(){return t(E.remove(n))},icon:!0,key:n,floating:!0},Object(m.a)({},r,!0)),l.a.createElement(p.a,{name:a[r].icon}),l.a.createElement(d.a.Content,null,l.a.createElement(d.a.Header,null,a[r].label),c))})))},y=a(370),g=a(706),k=a(71),D=a.n(k),I=a(48),T=a(87),x=a(368),C=a.n(x),A=new T.a("patients");function z(){return(z=Object(i.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.allDocs({include_docs:!0,attachments:!1,keys:t});case 2:return a=e.sent,e.abrupt("return",t.map((function(e){return a.rows.map((function(e){return e.doc})).find((function(t){var a=t._id;return e===a}))})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P,N=new C.a((function(e){return z.apply(this,arguments)})),_=Object(b.b)("patients/destroy",Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A.destroy());case 1:case"end":return e.stop()}}),e)})))),M=Object(b.b)("patients/list",Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.allDocs({include_docs:!0,attachments:!1});case 2:return t=e.sent,e.abrupt("return",t.rows.map((function(e){return e.doc})));case 4:case"end":return e.stop()}}),e)})))),S=Object(b.b)("patients/add",function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post(t);case 2:return a=e.sent,n=a.id,e.abrupt("return",Object(I.a)({},t,{_id:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y=Object(b.b)("patients/update",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.put(t);case 2:return N.clear(t._id),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),H=Object(b.b)("patients/details",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A.get(t,{attachments:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=Object(b.b)("patients/set",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A.get(t,{attachments:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=Object(b.b)("patients/edit",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A.get(t,{attachments:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=Object(b.b)("patients/remove",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.clear(t._id),e.abrupt("return",A.remove(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),W=Object(b.c)({sortComparer:function(e,t){return e.surname.localeCompare(t.surname)},selectId:function(e){return e._id}}),U=Object(b.d)({name:"patients",initialState:W.getInitialState({loading:!1,current:void 0,error:null}),reducers:{reset:function(e){e.current=void 0},newPatient:function(e){e.current=void 0},add:W.addOne,update:W.updateOne,remove:W.removeOne},extraReducers:(n={},Object(m.a)(n,M.pending,(function(e){e.loading=!0})),Object(m.a)(n,M.fulfilled,(function(e,t){var a=t.payload;W.setAll(e,a),e.loading=!1,e.current=void 0})),Object(m.a)(n,H.pending,(function(e){e.current=void 0,e.loading=!0})),Object(m.a)(n,H.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(m.a)(n,R.pending,(function(e){e.current=void 0,e.loading=!0})),Object(m.a)(n,R.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(m.a)(n,S.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(m.a)(n,F.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(m.a)(n,Y.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(m.a)(n,L.fulfilled,(function(e,t){t.payload;e.current=void 0})),n)}),B=U.actions,G=B.newPatient,J={reset:B.reset,set:F,update:Y,add:S,remove:L,list:M,details:H,editPatient:R,newPatient:G,destroy:_},V=Object(I.a)({current:function(e){return e.patients.current},loading:function(e){return e.patients.loading}},W.getSelectors((function(e){return e.patients}))),Z=U.reducer,$=a(369),q=a(401);T.a.plugin(q.a);var K,Q=new T.a("appointments"),X=Object(b.b)("appointments/list",function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n,r,i,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.patientId,e.next=3,Q.find({selector:{patientId:a}});case 3:if(n=e.sent,!a){e.next=6;break}return e.abrupt("return",n.docs);case 6:r=[],i=Object($.a)(n.docs),e.prev=8,i.s();case 10:if((u=i.n()).done){e.next=24;break}return l=u.value,e.t0=r,e.t1=I.a,e.t2={},e.t3=l,e.next=18,N.load(l.patientId);case 18:e.t4=e.sent,e.t5={patient:e.t4},e.t6=(0,e.t1)(e.t2,e.t3,e.t5),e.t0.push.call(e.t0,e.t6);case 22:e.next=10;break;case 24:e.next=29;break;case 26:e.prev=26,e.t7=e.catch(8),i.e(e.t7);case 29:return e.prev=29,i.f(),e.finish(29);case 32:return e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,null,[[8,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()),ee=Object(b.b)("appointments/add",function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.post(t);case 2:return a=e.sent,n=a.id,e.abrupt("return",Object(I.a)({},t,{_id:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),te=Object(b.b)("appointments/update",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.put(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ae=Object(b.b)("appointments/details",function(){var e=Object(i.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dispatch,e.next=3,Q.get(t,{attachments:!1});case 3:return r=e.sent,n(J.set(r.patientId)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),ne=Object(b.b)("appointments/edit",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q.get(t,{attachments:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),re=Object(b.b)("appointments/remove",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q.remove(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ce=Object(b.c)({sortComparer:function(e,t){return console.info({a:e,b:t}),t.visitDate.localeCompare(e.visitDate)},selectId:function(e){return e._id}}),ie=Object(b.d)({name:"appointments",initialState:ce.getInitialState({loading:!1,current:void 0,error:null}),reducers:{newAppointment:function(e){e.current=void 0},add:ce.addOne,update:ce.updateOne,remove:ce.removeOne},extraReducers:(P={},Object(m.a)(P,X.pending,(function(e){e.loading=!0})),Object(m.a)(P,X.fulfilled,(function(e,t){var a=t.payload;ce.setAll(e,a),e.loading=!1})),Object(m.a)(P,ae.pending,(function(e){e.current=void 0,e.loading=!0})),Object(m.a)(P,ae.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(m.a)(P,ne.pending,(function(e){e.current=void 0,e.loading=!0})),Object(m.a)(P,ne.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(m.a)(P,ee.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(m.a)(P,te.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(m.a)(P,re.fulfilled,(function(e,t){t.payload;e.current=void 0})),P)}),ue={update:te,add:ee,remove:re,list:X,details:ae,editAppointment:ne,newAppointment:ie.actions.newAppointment},le=Object(I.a)({current:function(e){return e.appointments.current},loading:function(e){return e.appointments.loading}},ce.getSelectors((function(e){return e.appointments}))),oe=ie.reducer,se=Object(b.d)({name:"navigation",initialState:"PATIENT",reducers:{navigate:function(e,t){return t.payload}},extraReducers:(K={},Object(m.a)(K,J.newPatient,(function(){return"ADD_PATIENT"})),Object(m.a)(K,ue.newAppointment,(function(){return"ADD_APPOINTMENT"})),Object(m.a)(K,J.editPatient.fulfilled,(function(){return"ADD_PATIENT"})),Object(m.a)(K,ue.editAppointment.fulfilled,(function(){return"ADD_APPOINTMENT"})),Object(m.a)(K,J.remove.fulfilled,(function(){return"PATIENT"})),Object(m.a)(K,ue.remove.fulfilled,(function(){return"PATIENT_DETAILS"})),Object(m.a)(K,J.update.fulfilled,(function(){return"PATIENT_DETAILS"})),Object(m.a)(K,ue.update.fulfilled,(function(){return"APPOINTMENT_DETAILS"})),Object(m.a)(K,J.add.fulfilled,(function(){return"PATIENT_DETAILS"})),Object(m.a)(K,ue.add.fulfilled,(function(){return"APPOINTMENT_DETAILS"})),Object(m.a)(K,ue.details.pending,(function(){return"APPOINTMENT_DETAILS"})),Object(m.a)(K,J.list.fulfilled,(function(){return"PATIENT"})),Object(m.a)(K,J.details.pending,(function(){return"PATIENT_DETAILS"})),K)}),me={navigate:se.actions.navigate},de=function(e){return e.navigation},pe=se.reducer,fe=function(){return 0},be=function(){var e=Object(O.c)(de),t=Object(O.c)(fe),a=Object(O.b)();return l.a.createElement(y.a,{"data-cy":"navigation",size:"massive",pointing:!0},[{name:"Pacjenci",values:["PATIENT","EDIT_PATIENT"]},{name:"Wizyty",values:["APPOINTMENT"]},{name:"Ustawienia",values:["SETTINGS"]}].map((function(t){var n=t.name,r=t.values;return l.a.createElement(y.a.Item,{"data-cy":"top-navigation-".concat(r[0]),key:n,name:n,active:-1!==D.a.indexOf(r,e),onClick:function(){a(J.reset()),a(me.navigate(r[0]))}})})),l.a.createElement(y.a.Menu,{position:"right"},l.a.createElement(y.a.Item,{disabled:!t,name:"Por\xf3wnaj (".concat(t,")"),onClick:function(){return a(me.navigate("COMPARE"))}}),l.a.createElement(y.a.Item,null,l.a.createElement(g.a,{icon:"search",placeholder:"Szukaj..."}))))},ve=function(e){var t=e.map,a=Object(O.c)(de);return t[a]?t[a]:t._default||null},Ee=a(268),je=a(748),he=a(119),Oe=a(749),we=a(90),ye=function(){var e=Object(O.b)(),t=Object(O.c)(V.selectAll),a=Object(O.c)(V.loading);if(Object(u.useEffect)((function(){e(J.list())}),[e]),!t.length)return l.a.createElement(Ee.a,{placeholder:!0,loading:a},l.a.createElement(je.a,{icon:!0},l.a.createElement(p.a,{name:"user md"}),"Jeszcze nie zarejestrowano \u017cadnego pacjenta"),l.a.createElement(he.a,{"data-cy":"new-patient-hero",primary:!0,onClick:function(){return e(J.newPatient())}},l.a.createElement(p.a,{name:"add user"})," Dodaj pacjenta"));var n,r="";return l.a.createElement(l.a.Fragment,null,l.a.createElement(he.a,{"data-cy":"new-patient",floated:"right",primary:!0,onClick:function(){return e(J.newPatient())}},l.a.createElement(p.a,{name:"add user"})," Dodaj pacjenta"),l.a.createElement(je.a,{as:"h2"},l.a.createElement(p.a,{name:"group"}),l.a.createElement(je.a.Content,null,"Pacjenci",l.a.createElement(je.a.Subheader,null,t.length," rekord\xf3w"))),l.a.createElement(Oe.a,{singleLine:!0,selectable:!0,padded:!0},l.a.createElement(Oe.a.Header,null,l.a.createElement(Oe.a.Row,null,l.a.createElement(Oe.a.HeaderCell,null,"Imi\u0119 i Nazwisko"),l.a.createElement(Oe.a.HeaderCell,null,"Data urodzenia"),l.a.createElement(Oe.a.HeaderCell,null,"Inne informacje"))),l.a.createElement(Oe.a.Body,null,t.map((function(t){var a=t._id,c=t.name,i=t.surname,u=t.birthDate,o=t.comment;return i&&r!==i[0].toUpperCase()?(r=i[0].toUpperCase(),n=l.a.createElement(we.a,{ribbon:!0},i[0].toUpperCase())):n=null,l.a.createElement(Oe.a.Row,{"data-cy":"data-name-cell",onClick:function(){return e(J.details(a))},key:a},l.a.createElement(Oe.a.Cell,null,n,l.a.createElement("span",null,c," ",i)),l.a.createElement(Oe.a.Cell,null,u),l.a.createElement(Oe.a.Cell,null,o))})))))},ge=a(86),ke=a(216),De=a(750),Ie=a(381),Te=a(213),xe=a(36),Ce=a.n(xe),Ae=a(372),ze=a(373),Pe=a(374),Ne=a.n(Pe),_e=function(){function e(t){Object(Ae.a)(this,e),this.schema=t}return Object(ze.a)(e,[{key:"validate",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n,r,i,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={},n=D.a.keys(this.schema),r=0;case 3:if(!(r<n.length)){e.next=18;break}i=[],u=0;case 6:if(!(u<this.schema[n[r]].length)){e.next=14;break}return e.next=9,this.test(this.schema[n[r]][u].test,t[n[r]],t);case 9:(!(l=e.sent)||D.a.isObject(l)&&!l.result)&&i.push(D.a.isObject(l)&&l.message?l.message:this.schema[n[r]][u].message);case 11:u++,e.next=6;break;case 14:i.length&&(a[n[r]]=i[0]);case 15:r++,e.next=3;break;case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"test",value:function(){var e=Object(i.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D.a.isFunction(t)){e.next=5;break}return e.next=3,t(a,n);case 3:return r=e.sent,e.abrupt("return",r);case 5:return e.abrupt("return",Ne.a[t](a));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}(),Me=function(e){var t=e.errors;return l.a.createElement(l.a.Fragment,null,!!Object.keys(t).length&&l.a.createElement(d.a,{negative:!0},l.a.createElement(d.a.Header,{"data-cy":"validation-error-message"},"Formularz zawiera b\u0142\u0119dy"),l.a.createElement("ul",null,Object.values(t).map((function(e,t){return l.a.createElement("li",{key:t},e)})))))},Se=function(){var e=Object(O.b)(),t=Object(O.c)(V.current),a={name:"",surname:"",birthDate:"",comment:""},n="",r="";if(void 0!==t){var o=t;n=o._id,r=o._rev,a=Object(ke.a)(o,["_id","_rev"])}var s=new _e({name:[{test:function(e){return e.length>1},message:"Imi\u0119 musi mie\u0107 przynajmniej dwa znaki"}],surname:[{test:function(e){return e.length>1},message:"Nazwisko musi mie\u0107 przynajmniej dwa znaki"}],birthDate:[{test:function(e){return""===e||Ce()(e,"YYYY-MM-DD").isValid()},message:"Wpisz poprawn\u0105 dat\u0119"}]}),d=Object(u.useState)({errors:{},values:a}),f=Object(ge.a)(d,2),b=f[0],v=f[1];Object(u.useEffect)((function(){v({errors:{},values:t||a})}),[t]);var E=function(){var e=Object(i.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v((function(e){return{values:Object(I.a)({},e.values,Object(m.a)({},t,a)),errors:Object(I.a)({},D.a.omit(e.errors,[t]))}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var a=Object(i.a)(c.a.mark((function a(){var i;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.validate(b.values);case 2:if(i=a.sent,D.a.isEmpty(i)){a.next=6;break}return v((function(e){return{values:Object(I.a)({},e.values),errors:i}})),a.abrupt("return");case 6:e(void 0===t?J.add(b.values):J.update(Object(I.a)({_id:n,_rev:r},b.values)));case 7:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return l.a.createElement(De.a,null,l.a.createElement(Ie.a,{columns:"3"},l.a.createElement(Ie.a.Row,{divided:!0},l.a.createElement(Ie.a.Column,{width:"6"},l.a.createElement(De.a.Input,{error:!!b.errors.name,"data-cy":"first_name",value:b.values.name,fluid:!0,label:"Imi\u0119",placeholder:"Imi\u0119",onChange:function(e,t){return E("name",t.value)}})),l.a.createElement(Ie.a.Column,{width:"5"},l.a.createElement(De.a.Input,{error:!!b.errors.surname,"data-cy":"last_name",value:b.values.surname,fluid:!0,label:"Nazwisko",placeholder:"Nazwisko",onChange:function(e,t){return E("surname",t.value)}})),l.a.createElement(Ie.a.Column,{width:"5"},l.a.createElement(De.a.Field,{error:!!b.errors.birthDate},l.a.createElement("label",null,"Data urodzenia"),l.a.createElement(Te.DateInput,{duration:0,closable:!0,closeOnMouseLeave:!0,clearable:!0,dateFormat:"YYYY-MM-DD",localization:"pl",startMode:"year",name:"birthDate",placeholder:"Data urodzenia",value:b.values.birthDate,iconPosition:"right",popupPosition:"bottom right",onClear:function(){return E("birthDate","")},onChange:function(e,t){var a=t.value,n=t.format;if(a){var r=Ce()(a,n);r.isValid()?E("birthDate",r.format("YYYY-MM-DD")):E("birthDate","")}}})))),l.a.createElement(Ie.a.Column,{width:"10"},l.a.createElement(De.a.TextArea,{"data-cy":"description",value:b.values.comment,label:"Inne informacje",placeholder:"Inne informacje",onChange:function(e,t){return E("comment","".concat(t.value))}}))),l.a.createElement(Me,{errors:b.errors}),l.a.createElement(Ie.a,null,l.a.createElement(Ie.a.Row,{columns:"2"},l.a.createElement(Ie.a.Column,null,l.a.createElement(he.a.Group,null,l.a.createElement(he.a,{"data-cy":"patient-save-button",onClick:j,positive:!0},"Zapisz"),l.a.createElement(he.a.Or,{text:"lub"}),l.a.createElement(he.a,{"data-cy":"patient-cancel-button",onClick:function(){return e(me.navigate("PATIENT"))}},"Anuluj"))),t&&l.a.createElement(Ie.a.Column,{textAlign:"right"},l.a.createElement(he.a,{"data-cy":"patient-delete-button",negative:!0,onClick:function(){e(J.remove(t))}},l.a.createElement(p.a,{name:"trash"})," Usu\u0144")))))},Ye=a(751),He=a(124),Fe=function(){var e=Object(O.b)(),t=Object(O.c)(V.current),a=Object(O.c)(le.selectAll);return Object(u.useEffect)((function(){e(ue.list({patientId:null===t||void 0===t?void 0:t._id}))}),[e,t]),a.length?l.a.createElement(l.a.Fragment,null,!t&&l.a.createElement(je.a,{as:"h2"},l.a.createElement(p.a,{name:"group"}),l.a.createElement(je.a.Content,null,"Wizyty",l.a.createElement(je.a.Subheader,null,a.length," rekord\xf3w"))),l.a.createElement(Oe.a,{padded:!0,selectable:!0,fixed:!0},l.a.createElement(Oe.a.Header,null,l.a.createElement(Oe.a.Row,null,!t&&l.a.createElement(Oe.a.HeaderCell,null,"Pacjent"),l.a.createElement(Oe.a.HeaderCell,{width:5},"Data i godzina wizyty"),l.a.createElement(Oe.a.HeaderCell,{width:7},"Inne informacje"))),l.a.createElement(Oe.a.Body,null,a.map((function(a){var n=a._id,r=a.interview,c=a.visitDate,i=a.patient;return l.a.createElement(Oe.a.Row,{onClick:function(){e(ue.details(n))},key:n},!t&&l.a.createElement(Oe.a.Cell,{verticalAlign:"top"},i&&"".concat(i.name," ").concat(i.surname)),l.a.createElement(Oe.a.Cell,{verticalAlign:"top"},c),l.a.createElement(Oe.a.Cell,null,r))}))))):l.a.createElement(Ee.a,{placeholder:!0},l.a.createElement(je.a,{icon:!0},l.a.createElement(p.a,{name:"user md"}),"Jeszcze nie zarejestrowano \u017cadnej wizyty"))},Re=function(e){var t=e.patientId,a=Object(O.b)(),n=Object(O.c)(le.current),r=Object(O.c)(V.current),o={patientId:r._id,interview:"",visitDate:Ce()().format("YYYY-MM-DD @ HH:mm")},s="",d="";if(void 0!==n){var f=n;s=f._id,d=f._rev,o=Object(ke.a)(f,["_id","_rev"])}var b=Object(u.useState)({values:o}),v=Object(ge.a)(b,2),E=v[0],j=v[1],h=function(){var e=Object(i.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j((function(e){return{values:Object(I.a)({},e.values,Object(m.a)({},t,a))}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(void 0===n?ue.add(E.values):ue.update(Object(I.a)({_id:s,_rev:d},E.values))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,r&&l.a.createElement(je.a,{as:"h2"},l.a.createElement(p.a,{name:"user circle"}),l.a.createElement(je.a.Content,null,r.name," ",r.surname,l.a.createElement(je.a.Subheader,null,"Nowa wizyta"))),l.a.createElement(De.a,null,l.a.createElement(De.a.Field,null,l.a.createElement("label",null,"Data wizyty"),l.a.createElement(Te.DateTimeInput,{duration:0,closable:!0,closeOnMouseLeave:!0,dateFormat:"YYYY-MM-DD @ HH:mm",localization:"pl",placeholder:"Data wizyty",value:E.values.visitDate,iconPosition:"right",popupPosition:"bottom right",onChange:function(e,t){var a=t.value;if(a){var n=Ce()(a,"YYYY-MM-DD @ HH:mm");n.isValid()?h("visitDate",n.format("YYYY-MM-DD @ HH:mm")):h("visitDate","")}}})),l.a.createElement(De.a.TextArea,{autoFocus:!0,"data-cy":"description",value:E.values.interview,label:"Inne informacje",placeholder:"Inne informacje",onChange:function(e,t){return h("interview","".concat(t.value))}}),l.a.createElement(Ie.a,null,l.a.createElement(Ie.a.Row,{columns:"2"},l.a.createElement(Ie.a.Column,null,l.a.createElement(he.a.Group,null,l.a.createElement(he.a,{onClick:w,positive:!0},"Zapisz"),l.a.createElement(he.a.Or,{text:"lub"}),l.a.createElement(he.a,{onClick:function(){return a(J.details(t))}},"Anuluj"))),l.a.createElement(Ie.a.Column,{textAlign:"right"},n&&l.a.createElement(he.a,{negative:!0,onClick:function(){a(ue.remove(n))}},l.a.createElement(p.a,{name:"trash"})," Usu\u0144"))))))},Le=function(){var e=Object(O.c)(V.current),t=Object(O.c)(le.current),a=Object(O.b)(),n=Object(u.useState)(!1),r=Object(ge.a)(n,2),c=r[0],i=r[1];return Object(u.useEffect)((function(){}),[a]),e&&t?l.a.createElement(l.a.Fragment,null,l.a.createElement(he.a.Group,{floated:"right"},l.a.createElement(he.a,{disabled:c,primary:!0,onClick:function(){i(!0)}},l.a.createElement(p.a,{name:"video camera"}),"Nowe badanie"),l.a.createElement(He.a,{onChange:function(){a(ue.editAppointment(t._id))},className:"button icon",options:[{key:"edit",icon:"edit",text:"Modyfikuj",value:"edit"}],trigger:l.a.createElement(l.a.Fragment,null)})),l.a.createElement(je.a,{as:"h2"},l.a.createElement(p.a,{name:"user circle"}),l.a.createElement(je.a.Content,null,"Wizyta ",t.visitDate,l.a.createElement(je.a.Subheader,null,e.name," ",e.surname))),l.a.createElement(Ee.a,null,t.interview.split("\n").map((function(e,t){return l.a.createElement("p",{key:t},e)}))),l.a.createElement(he.a,{onClick:function(){return a(J.details(e._id))},basic:!0},l.a.createElement(p.a,{name:"arrow left"})," wr\xf3\u0107 do szczeg\xf3\u0142\xf3w pacjenta")):null},We=function(){var e=Object(O.c)(V.current),t=Object(O.b)();return e?l.a.createElement(Ye.a,null,l.a.createElement(Ie.a,{columns:"equal"},l.a.createElement(Ie.a.Row,null,l.a.createElement(Ie.a.Column,null,l.a.createElement(je.a,{as:"h2"},l.a.createElement(p.a,{name:"user circle"}),l.a.createElement(je.a.Content,{"data-cy":"patient-header-content"},e.name," ",e.surname,l.a.createElement(je.a.Subheader,null,"Szczeg\xf3\u0142y Pacjenta")))),l.a.createElement(Ie.a.Column,null,l.a.createElement(he.a.Group,{primary:!0,floated:"right",onClick:function(){return t(ue.newAppointment())}},l.a.createElement(he.a,{primary:!0},l.a.createElement(p.a,{name:"add to calendar"}),"Nowa wizyta"),l.a.createElement(He.a,{floating:!0,"data-cy":"dropdown-button-icon",onChange:function(){t(J.editPatient(e._id))},className:"button icon",options:[{key:"edit",icon:"edit",text:"Modyfikuj",value:"edit"}],trigger:l.a.createElement(l.a.Fragment,null)}))))),l.a.createElement(Ie.a,{divided:!0,style:{paddingTop:"0.5em"}},l.a.createElement(Ie.a.Row,null,l.a.createElement(Ie.a.Column,{width:7,style:{padding:"0 2em 3em 0"}},l.a.createElement("p",null,l.a.createElement("strong",null,"Data urodzenia: "),e.birthDate),l.a.createElement("p",null,l.a.createElement("strong",null,"Ostatnia wizyta: "),"24.05.2017"),l.a.createElement(je.a,{as:"h4"},"Inne informacje:"),l.a.createElement(Ee.a,null,e.comment.split("\n").map((function(e,t){return l.a.createElement("p",{key:t},e)}))),l.a.createElement(je.a,{as:"h3",style:{margin:"2em 0 1em 0"}},"Ostatnie wizyty"),l.a.createElement(Fe,null)),l.a.createElement(Ie.a.Column,{width:9,style:{padding:"0 0 3em 2em"}},l.a.createElement(je.a,{as:"h4"},"Ostatnie badanie - 02.02.2017, 09:00"),l.a.createElement(Ee.a,null,"// TODO: last scan here")))),l.a.createElement(he.a,{"data-cy":"back-button",onClick:function(){return t(J.list())},basic:!0},l.a.createElement(p.a,{name:"arrow left"})," Wr\xf3\u0107")):null},Ue=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(be,null),l.a.createElement("div",{style:{margin:"2em"}},l.a.createElement(ve,{map:{ADD_PATIENT:l.a.createElement(Se,null),ADD_APPOINTMENT:l.a.createElement(Re,null),PATIENT_DETAILS:l.a.createElement(We,null),APPOINTMENT_DETAILS:l.a.createElement(Le,null),PATIENT:l.a.createElement(ye,null),APPOINTMENT:l.a.createElement(Fe,null),_default:l.a.createElement("p",null,"_default")}})),l.a.createElement(w,null))},Be=1,Ge={fulfilled:{type:"success",add:"Nowy wpis zosta\u0142 zapisany",update:"Zmiany zosta\u0142y zapisane",remove:"Wpis zosta\u0142 usuni\u0119ty",patients:{add:"Dane nowego pacjenta zosta\u0142y zapisane"}},rejected:{type:"error",add:"Nie uda\u0142o si\u0119 zapisa\u0107 danych",update:"Nie uda\u0142o si\u0119 zapisa\u0107 zmian",remove:"Nie uda\u0142o si\u0119 usun\u0105\u0107 wpisu",list:"Nie uda\u0142o si\u0119 pobra\u0107 listy"}},Je=function(e){var t=e.dispatch;return function(e){return function(){var a=Object(i.a)(c.a.mark((function a(n){var r,i,u,l,o,s,m,d,p;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(l=n.type.match(/^([a-z]+)\/([a-z]+)\/([a-z]+)$/)){a.next=3;break}return a.abrupt("return",e(n));case 3:return o=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";t(E.add({id:Be,type:a,text:e})),setTimeout((function(e){t(E.remove(e))}),3e3,Be),Be++},s=Object(ge.a)(l,4),s[0],m=s[1],d=s[2],p=s[3],(null===(r=Ge[p])||void 0===r||null===(i=r[m])||void 0===i?void 0:i[d])?o(Ge[p][m][d],Ge[p].type):(null===(u=Ge[p])||void 0===u?void 0:u[d])&&o(Ge[p][d],Ge[p].type),a.abrupt("return",e(n));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},Ve=Object(b.a)({reducer:{navigation:pe,patients:Z,appointments:oe,flash:j},middleware:[].concat(Object(f.a)(Object(b.e)()),[Je])});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(O.a,{store:Ve},l.a.createElement(Ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),window.Cypress&&(window.resetApp=Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new T.a("patients"),e.next=3,t.destroy();case 3:return a=new T.a("appointments"),e.next=6,a.destroy();case 6:case"end":return e.stop()}}),e)}))))}},[[416,1,2]]]);
//# sourceMappingURL=main.2464a034.chunk.js.map