(this["webpackJsonpphysio-client-2-rtk"]=this["webpackJsonpphysio-client-2-rtk"]||[]).push([[0],{417:function(e,t,a){e.exports=a(705)},424:function(e,t,a){},705:function(e,t,a){"use strict";a.r(t);var n,r=a(18),c=a.n(r),i=a(25),u=a(0),l=a.n(u),o=a(69),s=a.n(o),m=(a(423),a(20)),d=a(747),p=a(44),f=(a(424),a(215)),v=a(28),b=Object(v.d)({name:"flash",initialState:[],reducers:{add:{reducer:function(e,t){var a=t.payload;return[].concat(Object(f.a)(e),[a])}},remove:function(e,t){var a=t.payload;return e.filter((function(e){return e.id!==a}))}}}),E=b.actions,j=b.reducer,O=function(e){return e.flash},h=a(23),g=function(){var e=Object(h.c)(O),t=Object(h.b)();if(!e)return null;var a={info:{label:"Informacja",icon:"info"},success:{label:"Sukces!",icon:"check"},error:{label:"B\u0142\u0105d!",icon:"times"},warning:{label:"Ostrze\u017cenie",icon:"warning"}};return l.a.createElement("div",{className:"Flash"},e.map((function(e){var n=e.id,r=e.type,c=e.text;return l.a.createElement(d.a,Object.assign({onDismiss:function(){return t(E.remove(n))},icon:!0,key:n,floating:!0},Object(m.a)({},r,!0)),l.a.createElement(p.a,{name:a[r].icon}),l.a.createElement(d.a.Content,null,l.a.createElement(d.a.Header,null,a[r].label),c))})))},w=a(371),y=a(706),k=a(73),x=a.n(k),D=a(36),T=a(66),C=a(369),I=a.n(C),A=new T.a("patients");function z(){return(z=Object(i.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.allDocs({include_docs:!0,attachments:!1,keys:t});case 2:return a=e.sent,e.abrupt("return",t.map((function(e){return a.rows.map((function(e){return e.doc})).find((function(t){var a=t._id;return e===a}))})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P,N=new I.a((function(e){return z.apply(this,arguments)})),_=Object(v.b)("patients/destroy",Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A.destroy());case 1:case"end":return e.stop()}}),e)})))),S=Object(v.b)("patients/list",Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.allDocs({include_docs:!0,attachments:!1});case 2:return t=e.sent,e.abrupt("return",t.rows.map((function(e){return e.doc})));case 4:case"end":return e.stop()}}),e)})))),M=Object(v.b)("patients/add",function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post(t);case 2:return a=e.sent,n=a.id,e.abrupt("return",Object(D.a)({},t,{_id:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),H=Object(v.b)("patients/update",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.put(t);case 2:return N.clear(t._id),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y=Object(v.b)("patients/details",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A.get(t,{attachments:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=Object(v.b)("patients/set",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A.get(t,{attachments:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=Object(v.b)("patients/edit",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A.get(t,{attachments:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=Object(v.b)("patients/remove",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.clear(t._id),e.abrupt("return",A.remove(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),W=Object(v.c)({sortComparer:function(e,t){return e.surname.localeCompare(t.surname)},selectId:function(e){return e._id}}),U=Object(v.d)({name:"patients",initialState:W.getInitialState({loading:!1,current:void 0,error:null}),reducers:{reset:function(e){e.current=void 0},newPatient:function(e){e.current=void 0},add:W.addOne,update:W.updateOne,remove:W.removeOne},extraReducers:(n={},Object(m.a)(n,S.pending,(function(e){e.loading=!0})),Object(m.a)(n,S.fulfilled,(function(e,t){var a=t.payload;W.setAll(e,a),e.loading=!1,e.current=void 0})),Object(m.a)(n,Y.pending,(function(e){e.current=void 0,e.loading=!0})),Object(m.a)(n,Y.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(m.a)(n,R.pending,(function(e){e.current=void 0,e.loading=!0})),Object(m.a)(n,R.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(m.a)(n,M.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(m.a)(n,F.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(m.a)(n,H.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(m.a)(n,L.fulfilled,(function(e,t){t.payload;e.current=void 0})),n)}),G=U.actions,B=G.newPatient,J={reset:G.reset,set:F,update:H,add:M,remove:L,list:S,details:Y,editPatient:R,newPatient:B,destroy:_},Z=Object(D.a)({current:function(e){return e.patients.current},loading:function(e){return e.patients.loading}},W.getSelectors((function(e){return e.patients}))),V=U.reducer,$=a(370),q=a(402);T.a.plugin(q.a);var K,Q,X=new T.a("appointments"),ee=Object(v.b)("appointments/list",function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n,r,i,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.patientId,e.next=3,X.find({selector:{patientId:a}});case 3:if(n=e.sent,!a){e.next=6;break}return e.abrupt("return",n.docs);case 6:r=[],i=Object($.a)(n.docs),e.prev=8,i.s();case 10:if((u=i.n()).done){e.next=24;break}return l=u.value,e.t0=r,e.t1=D.a,e.t2={},e.t3=l,e.next=18,N.load(l.patientId);case 18:e.t4=e.sent,e.t5={patient:e.t4},e.t6=(0,e.t1)(e.t2,e.t3,e.t5),e.t0.push.call(e.t0,e.t6);case 22:e.next=10;break;case 24:e.next=29;break;case 26:e.prev=26,e.t7=e.catch(8),i.e(e.t7);case 29:return e.prev=29,i.f(),e.finish(29);case 32:return e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,null,[[8,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()),te=Object(v.b)("appointments/add",function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.post(t);case 2:return a=e.sent,n=a.id,e.abrupt("return",Object(D.a)({},t,{_id:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ae=Object(v.b)("appointments/update",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.put(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ne=Object(v.b)("appointments/details",function(){var e=Object(i.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dispatch,e.next=3,X.get(t,{attachments:!1});case 3:return r=e.sent,n(J.set(r.patientId)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),re=Object(v.b)("appointments/edit",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X.get(t,{attachments:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ce=Object(v.b)("appointments/remove",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X.remove(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ie=Object(v.c)({sortComparer:function(e,t){return console.info({a:e,b:t}),t.visitDate.localeCompare(e.visitDate)},selectId:function(e){return e._id}}),ue=Object(v.d)({name:"appointments",initialState:ie.getInitialState({loading:!1,current:void 0,error:null}),reducers:{newAppointment:function(e){e.current=void 0},add:ie.addOne,update:ie.updateOne,remove:ie.removeOne},extraReducers:(P={},Object(m.a)(P,ee.pending,(function(e){e.loading=!0})),Object(m.a)(P,ee.fulfilled,(function(e,t){var a=t.payload;ie.setAll(e,a),e.loading=!1})),Object(m.a)(P,ne.pending,(function(e){e.current=void 0,e.loading=!0})),Object(m.a)(P,ne.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(m.a)(P,re.pending,(function(e){e.current=void 0,e.loading=!0})),Object(m.a)(P,re.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(m.a)(P,te.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(m.a)(P,ae.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(m.a)(P,ce.fulfilled,(function(e,t){t.payload;e.current=void 0})),P)}),le={update:ae,add:te,remove:ce,list:ee,details:ne,editAppointment:re,newAppointment:ue.actions.newAppointment},oe=Object(D.a)({current:function(e){return e.appointments.current},loading:function(e){return e.appointments.loading}},ie.getSelectors((function(e){return e.appointments}))),se=ue.reducer,me=Object(v.d)({name:"navigation",initialState:"PATIENT",reducers:{navigate:function(e,t){return t.payload}},extraReducers:(K={},Object(m.a)(K,J.newPatient,(function(){return"ADD_PATIENT"})),Object(m.a)(K,le.newAppointment,(function(){return"ADD_APPOINTMENT"})),Object(m.a)(K,J.editPatient.fulfilled,(function(){return"ADD_PATIENT"})),Object(m.a)(K,le.editAppointment.fulfilled,(function(){return"ADD_APPOINTMENT"})),Object(m.a)(K,J.remove.fulfilled,(function(){return"PATIENT"})),Object(m.a)(K,le.remove.fulfilled,(function(){return"PATIENT_DETAILS"})),Object(m.a)(K,J.update.fulfilled,(function(){return"PATIENT_DETAILS"})),Object(m.a)(K,le.update.fulfilled,(function(){return"APPOINTMENT_DETAILS"})),Object(m.a)(K,J.add.fulfilled,(function(){return"PATIENT_DETAILS"})),Object(m.a)(K,le.add.fulfilled,(function(){return"APPOINTMENT_DETAILS"})),Object(m.a)(K,le.details.pending,(function(){return"APPOINTMENT_DETAILS"})),Object(m.a)(K,J.list.fulfilled,(function(){return"PATIENT"})),Object(m.a)(K,J.details.pending,(function(){return"PATIENT_DETAILS"})),K)}),de={navigate:me.actions.navigate},pe=function(e){return e.navigation},fe=me.reducer,ve=function(){return 0},be=function(){var e=Object(h.c)(pe),t=Object(h.c)(ve),a=Object(h.b)();return l.a.createElement(w.a,{"data-cy":"navigation",size:"massive",pointing:!0},[{name:"Pacjenci",values:["PATIENT","EDIT_PATIENT"]},{name:"Wizyty",values:["APPOINTMENT"]},{name:"Ustawienia",values:["SETTINGS"]}].map((function(t){var n=t.name,r=t.values;return l.a.createElement(w.a.Item,{"data-cy":"top-navigation-".concat(r[0]),key:n,name:n,active:-1!==x.a.indexOf(r,e),onClick:function(){a(J.reset()),a(de.navigate(r[0]))}})})),l.a.createElement(w.a.Menu,{position:"right"},l.a.createElement(w.a.Item,{disabled:!t,name:"Por\xf3wnaj (".concat(t,")"),onClick:function(){return a(de.navigate("COMPARE"))}}),l.a.createElement(w.a.Item,null,l.a.createElement(y.a,{icon:"search",placeholder:"Szukaj..."}))))},Ee=function(e){var t=e.map,a=Object(h.c)(pe);return t[a]?t[a]:t._default||null},je=a(269),Oe=a(748),he=a(119),ge=a(749),we=a(90),ye=function(){var e=Object(h.b)(),t=Object(h.c)(Z.selectAll),a=Object(h.c)(Z.loading);if(Object(u.useEffect)((function(){e(J.list())}),[e]),!t.length)return l.a.createElement(je.a,{placeholder:!0,loading:a},l.a.createElement(Oe.a,{icon:!0},l.a.createElement(p.a,{name:"user md"}),"Jeszcze nie zarejestrowano \u017cadnego pacjenta"),l.a.createElement(he.a,{"data-cy":"new-patient-hero",primary:!0,onClick:function(){return e(J.newPatient())}},l.a.createElement(p.a,{name:"add user"})," Dodaj pacjenta"));var n,r="";return l.a.createElement(l.a.Fragment,null,l.a.createElement(he.a,{"data-cy":"new-patient",floated:"right",primary:!0,onClick:function(){return e(J.newPatient())}},l.a.createElement(p.a,{name:"add user"})," Dodaj pacjenta"),l.a.createElement(Oe.a,{as:"h2"},l.a.createElement(p.a,{name:"group"}),l.a.createElement(Oe.a.Content,null,"Pacjenci",l.a.createElement(Oe.a.Subheader,null,t.length," rekord\xf3w"))),l.a.createElement(ge.a,{singleLine:!0,selectable:!0,padded:!0},l.a.createElement(ge.a.Header,null,l.a.createElement(ge.a.Row,null,l.a.createElement(ge.a.HeaderCell,null,"Imi\u0119 i Nazwisko"),l.a.createElement(ge.a.HeaderCell,null,"Data urodzenia"),l.a.createElement(ge.a.HeaderCell,null,"Inne informacje"))),l.a.createElement(ge.a.Body,null,t.map((function(t){var a=t._id,c=t.name,i=t.surname,u=t.birthDate,o=t.comment;return i&&r!==i[0].toUpperCase()?(r=i[0].toUpperCase(),n=l.a.createElement(we.a,{ribbon:!0},i[0].toUpperCase())):n=null,l.a.createElement(ge.a.Row,{"data-cy":"data-name-cell",onClick:function(){return e(J.details(a))},key:a},l.a.createElement(ge.a.Cell,null,n,l.a.createElement("span",null,c," ",i)),l.a.createElement(ge.a.Cell,null,u),l.a.createElement(ge.a.Cell,null,o))})))))},ke=a(71),xe=a(216),De=a(750),Te=a(382),Ce=a(213),Ie=a(37),Ae=a.n(Ie),ze=a(373),Pe=a(374),Ne=a(375),_e=a.n(Ne),Se=function(){function e(t){Object(ze.a)(this,e),this.schema=t}return Object(Pe.a)(e,[{key:"validate",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n,r,i,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={},n=x.a.keys(this.schema),r=0;case 3:if(!(r<n.length)){e.next=18;break}i=[],u=0;case 6:if(!(u<this.schema[n[r]].length)){e.next=14;break}return e.next=9,this.test(this.schema[n[r]][u].test,t[n[r]],t);case 9:(!(l=e.sent)||x.a.isObject(l)&&!l.result)&&i.push(x.a.isObject(l)&&l.message?l.message:this.schema[n[r]][u].message);case 11:u++,e.next=6;break;case 14:i.length&&(a[n[r]]=i[0]);case 15:r++,e.next=3;break;case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"test",value:function(){var e=Object(i.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x.a.isFunction(t)){e.next=5;break}return e.next=3,t(a,n);case 3:return r=e.sent,e.abrupt("return",r);case 5:return e.abrupt("return",_e.a[t](a));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}(),Me=function(e){var t=e.errors;return l.a.createElement(l.a.Fragment,null,!!Object.keys(t).length&&l.a.createElement(d.a,{negative:!0},l.a.createElement(d.a.Header,{"data-cy":"validation-error-message"},"Formularz zawiera b\u0142\u0119dy"),l.a.createElement("ul",null,Object.values(t).map((function(e,t){return l.a.createElement("li",{key:t},e)})))))},He=function(){var e=Object(h.b)(),t=Object(h.c)(Z.current),a={name:"",surname:"",birthDate:"",comment:""},n="",r="";if(void 0!==t){var o=t;n=o._id,r=o._rev,a=Object(xe.a)(o,["_id","_rev"])}var s=new Se({name:[{test:function(e){return e.length>1},message:"Imi\u0119 musi mie\u0107 przynajmniej dwa znaki"}],surname:[{test:function(e){return e.length>1},message:"Nazwisko musi mie\u0107 przynajmniej dwa znaki"}],birthDate:[{test:function(e){return""===e||Ae()(e,"YYYY-MM-DD").isValid()},message:"Wpisz poprawn\u0105 dat\u0119"}]}),d=Object(u.useState)({errors:{},values:a}),f=Object(ke.a)(d,2),v=f[0],b=f[1];Object(u.useEffect)((function(){b({errors:{},values:t||a})}),[t]);var E=function(){var e=Object(i.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b((function(e){return{values:Object(D.a)({},e.values,Object(m.a)({},t,a)),errors:Object(D.a)({},x.a.omit(e.errors,[t]))}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var a=Object(i.a)(c.a.mark((function a(){var i;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.validate(v.values);case 2:if(i=a.sent,x.a.isEmpty(i)){a.next=6;break}return b((function(e){return{values:Object(D.a)({},e.values),errors:i}})),a.abrupt("return");case 6:e(void 0===t?J.add(v.values):J.update(Object(D.a)({_id:n,_rev:r},v.values)));case 7:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return l.a.createElement(De.a,null,l.a.createElement(Te.a,{columns:"3"},l.a.createElement(Te.a.Row,{divided:!0},l.a.createElement(Te.a.Column,{width:"6"},l.a.createElement(De.a.Input,{error:!!v.errors.name,"data-cy":"first_name",value:v.values.name,fluid:!0,label:"Imi\u0119",placeholder:"Imi\u0119",onChange:function(e,t){return E("name",t.value)}})),l.a.createElement(Te.a.Column,{width:"5"},l.a.createElement(De.a.Input,{error:!!v.errors.surname,"data-cy":"last_name",value:v.values.surname,fluid:!0,label:"Nazwisko",placeholder:"Nazwisko",onChange:function(e,t){return E("surname",t.value)}})),l.a.createElement(Te.a.Column,{width:"5"},l.a.createElement(De.a.Field,{error:!!v.errors.birthDate},l.a.createElement("label",null,"Data urodzenia"),l.a.createElement(Ce.DateInput,{duration:0,closable:!0,closeOnMouseLeave:!0,clearable:!0,dateFormat:"YYYY-MM-DD",localization:"pl",startMode:"year",name:"birthDate",placeholder:"Data urodzenia",value:v.values.birthDate,iconPosition:"right",popupPosition:"bottom right",onClear:function(){return E("birthDate","")},onChange:function(e,t){var a=t.value,n=t.format;if(a){var r=Ae()(a,n);r.isValid()?E("birthDate",r.format("YYYY-MM-DD")):E("birthDate","")}}})))),l.a.createElement(Te.a.Column,{width:"10"},l.a.createElement(De.a.TextArea,{"data-cy":"description",value:v.values.comment,label:"Inne informacje",placeholder:"Inne informacje",onChange:function(e,t){return E("comment","".concat(t.value))}}))),l.a.createElement(Me,{errors:v.errors}),l.a.createElement(Te.a,null,l.a.createElement(Te.a.Row,{columns:"2"},l.a.createElement(Te.a.Column,null,l.a.createElement(he.a.Group,null,l.a.createElement(he.a,{"data-cy":"patient-save-button",onClick:j,positive:!0},"Zapisz"),l.a.createElement(he.a.Or,{text:"lub"}),l.a.createElement(he.a,{"data-cy":"patient-cancel-button",onClick:function(){return e(de.navigate("PATIENT"))}},"Anuluj"))),t&&l.a.createElement(Te.a.Column,{textAlign:"right"},l.a.createElement(he.a,{"data-cy":"patient-delete-button",negative:!0,onClick:function(){e(J.remove(t))}},l.a.createElement(p.a,{name:"trash"})," Usu\u0144")))))},Ye=a(751),Fe=a(124),Re=function(){var e=Object(h.b)(),t=Object(h.c)(Z.current),a=Object(h.c)(oe.selectAll);return Object(u.useEffect)((function(){e(le.list({patientId:null===t||void 0===t?void 0:t._id}))}),[e,t]),a.length?l.a.createElement(l.a.Fragment,null,!t&&l.a.createElement(Oe.a,{as:"h2"},l.a.createElement(p.a,{name:"group"}),l.a.createElement(Oe.a.Content,null,"Wizyty",l.a.createElement(Oe.a.Subheader,null,a.length," rekord\xf3w"))),l.a.createElement(ge.a,{"data-cy":"appointment-list",padded:!0,selectable:!0,fixed:!0},l.a.createElement(ge.a.Header,null,l.a.createElement(ge.a.Row,null,!t&&l.a.createElement(ge.a.HeaderCell,null,"Pacjent"),l.a.createElement(ge.a.HeaderCell,{width:5},"Data i godzina wizyty"),l.a.createElement(ge.a.HeaderCell,{width:7},"Inne informacje"))),l.a.createElement(ge.a.Body,null,a.map((function(a){var n=a._id,r=a.interview,c=a.visitDate,i=a.patient;return l.a.createElement(ge.a.Row,{onClick:function(){e(le.details(n))},key:n},!t&&l.a.createElement(ge.a.Cell,{verticalAlign:"top"},i&&"".concat(i.name," ").concat(i.surname)),l.a.createElement(ge.a.Cell,{verticalAlign:"top"},c),l.a.createElement(ge.a.Cell,null,r))}))))):l.a.createElement(je.a,{placeholder:!0},l.a.createElement(Oe.a,{icon:!0},l.a.createElement(p.a,{name:"user md"}),"Jeszcze nie zarejestrowano \u017cadnej wizyty"))},Le=function(){var e=Object(h.b)(),t=Object(h.c)(oe.current),a=Object(h.c)(Z.current),n={patientId:a._id,interview:"",visitDate:Ae()().format("YYYY-MM-DD @ HH:mm")},r="",o="";if(void 0!==t){var s=t;r=s._id,o=s._rev,n=Object(xe.a)(s,["_id","_rev"])}var d=Object(u.useState)({values:n}),f=Object(ke.a)(d,2),v=f[0],b=f[1],E=function(){var e=Object(i.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b((function(e){return{values:Object(D.a)({},e.values,Object(m.a)({},t,a))}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var a=Object(i.a)(c.a.mark((function a(){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",e(void 0===t?le.add(v.values):le.update(Object(D.a)({_id:r,_rev:o},v.values))));case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,a&&l.a.createElement(Oe.a,{as:"h2"},l.a.createElement(p.a,{name:"user circle"}),l.a.createElement(Oe.a.Content,null,a.name," ",a.surname,l.a.createElement(Oe.a.Subheader,null,"Nowa wizyta"))),l.a.createElement(De.a,null,l.a.createElement(De.a.Field,null,l.a.createElement("label",null,"Data wizyty"),l.a.createElement(Ce.DateTimeInput,{duration:0,name:"visitDate",closable:!0,closeOnMouseLeave:!0,dateFormat:"YYYY-MM-DD @ HH:mm",localization:"pl",placeholder:"Data wizyty",value:v.values.visitDate,iconPosition:"right",popupPosition:"bottom right",onChange:function(e,t){var a=t.value;if(a){var n=Ae()(a,"YYYY-MM-DD @ HH:mm");n.isValid()?E("visitDate",n.format("YYYY-MM-DD @ HH:mm")):E("visitDate","")}}})),l.a.createElement(De.a.TextArea,{autoFocus:!0,"data-cy":"description",value:v.values.interview,label:"Inne informacje",placeholder:"Inne informacje",onChange:function(e,t){return E("interview","".concat(t.value))}}),l.a.createElement(Te.a,null,l.a.createElement(Te.a.Row,{columns:"2"},l.a.createElement(Te.a.Column,null,l.a.createElement(he.a.Group,null,l.a.createElement(he.a,{"data-cy":"appointment-save-button",onClick:j,positive:!0},"Zapisz"),l.a.createElement(he.a.Or,{text:"lub"}),l.a.createElement(he.a,{"data-cy":"appointment-cancel",onClick:function(){return e(J.details(a._id))}},"Anuluj"))),l.a.createElement(Te.a.Column,{textAlign:"right"},t&&l.a.createElement(he.a,{negative:!0,onClick:function(){e(le.remove(t))}},l.a.createElement(p.a,{name:"trash"})," Usu\u0144"))))))},We=function(){var e=Object(h.c)(Z.current),t=Object(h.c)(oe.current),a=Object(h.b)(),n=Object(u.useState)(!1),r=Object(ke.a)(n,2),c=r[0],i=r[1];return Object(u.useEffect)((function(){}),[a]),e&&t?l.a.createElement(l.a.Fragment,null,l.a.createElement(he.a.Group,{floated:"right"},l.a.createElement(he.a,{disabled:c,primary:!0,onClick:function(){i(!0)}},l.a.createElement(p.a,{name:"video camera"}),"Nowe badanie"),l.a.createElement(Fe.a,{"data-cy":"dropdown",onChange:function(){a(le.editAppointment(t._id))},className:"button icon",options:[{key:"edit",icon:"edit",text:"Modyfikuj",value:"edit"}],trigger:l.a.createElement(l.a.Fragment,null)})),l.a.createElement(Oe.a,{as:"h2"},l.a.createElement(p.a,{name:"user circle"}),l.a.createElement(Oe.a.Content,{"data-cy":"appointment-details"},"Wizyta ",t.visitDate,l.a.createElement(Oe.a.Subheader,null,e.name," ",e.surname))),l.a.createElement(je.a,{"data-cy":"appointment-description"},t.interview.split("\n").map((function(e,t){return l.a.createElement("p",{key:t},e)}))),l.a.createElement(he.a,{"data-cy":"navigate-back",onClick:function(){return a(J.details(e._id))},basic:!0},l.a.createElement(p.a,{name:"arrow left"})," wr\xf3\u0107 do szczeg\xf3\u0142\xf3w pacjenta")):null},Ue=function(){var e=Object(h.c)(Z.current),t=Object(h.b)();return e?l.a.createElement(Ye.a,null,l.a.createElement(Te.a,{columns:"equal"},l.a.createElement(Te.a.Row,null,l.a.createElement(Te.a.Column,null,l.a.createElement(Oe.a,{as:"h2"},l.a.createElement(p.a,{name:"user circle"}),l.a.createElement(Oe.a.Content,{"data-cy":"patient-header-content"},e.name," ",e.surname,l.a.createElement(Oe.a.Subheader,null,"Szczeg\xf3\u0142y Pacjenta")))),l.a.createElement(Te.a.Column,null,l.a.createElement(he.a.Group,{primary:!0,floated:"right",onClick:function(){return t(le.newAppointment())}},l.a.createElement(he.a,{primary:!0,"data-cy":"new-appointment"},l.a.createElement(p.a,{name:"add to calendar"}),"Nowa wizyta"),l.a.createElement(Fe.a,{floating:!0,"data-cy":"dropdown-button-icon",onChange:function(){t(J.editPatient(e._id))},className:"button icon",options:[{key:"edit",icon:"edit",text:"Modyfikuj",value:"edit"}],trigger:l.a.createElement(l.a.Fragment,null)}))))),l.a.createElement(Te.a,{divided:!0,style:{paddingTop:"0.5em"}},l.a.createElement(Te.a.Row,null,l.a.createElement(Te.a.Column,{width:7,style:{padding:"0 2em 3em 0"}},l.a.createElement("p",null,l.a.createElement("strong",null,"Data urodzenia: "),e.birthDate),l.a.createElement("p",null,l.a.createElement("strong",null,"Ostatnia wizyta: "),"24.05.2017"),l.a.createElement(Oe.a,{as:"h4"},"Inne informacje:"),l.a.createElement(je.a,null,e.comment.split("\n").map((function(e,t){return l.a.createElement("p",{key:t},e)}))),l.a.createElement(Oe.a,{as:"h3",style:{margin:"2em 0 1em 0"}},"Ostatnie wizyty"),l.a.createElement(Re,null)),l.a.createElement(Te.a.Column,{width:9,style:{padding:"0 0 3em 2em"}},l.a.createElement(Oe.a,{as:"h4"},"Ostatnie badanie - 02.02.2017, 09:00"),l.a.createElement(je.a,null,"// TODO: last scan here")))),l.a.createElement(he.a,{"data-cy":"back-button",onClick:function(){return t(J.list())},basic:!0},l.a.createElement(p.a,{name:"arrow left"})," Wr\xf3\u0107")):null},Ge=a(263),Be=a.n(Ge),Je=new T.a("settings"),Ze={all:{serverHost:"localhost:5000"},loading:!1},Ve=Object(v.b)("settings/list",Object(i.a)(c.a.mark((function e(){var t,a,n,r,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Be()(Ze.all),a=0,n=Object.keys(Ze.all);case 2:if(!(a<n.length)){e.next=12;break}return r=n[a],e.next=6,Je.find({selector:{name:r}});case 6:i=e.sent,1===(u=i.docs).length&&(t[r]=u[0].value);case 9:a++,e.next=2;break;case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e)})))),$e=Object(v.b)("settings/update",function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.value,e.next=3,Je.find({selector:{name:a}});case 3:if(r=e.sent,!(i=r.docs).length){e.next=10;break}return e.next=8,Je.put(Object(D.a)({},i[0],{value:n}));case 8:e.next=12;break;case 10:return e.next=12,Je.post({name:a,value:n});case 12:return e.abrupt("return",{name:a,value:n});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),qe=Object(v.d)({name:"settings",initialState:Ze,extraReducers:(Q={},Object(m.a)(Q,Ve.fulfilled,(function(e,t){var a=t.payload;e.all=a})),Object(m.a)(Q,$e.fulfilled,(function(e,t){var a=t.payload;e.all[a.name]=a.value})),Object(m.a)(Q,Ve.rejected,(function(e,t){console.error(t)})),Q)}),Ke={list:Ve,update:$e},Qe=function(e){return e.settings.all},Xe=qe.reducer,et=function(e){var t=e.serverHost,a=Object(h.b)(),n=Object(u.useState)({values:{serverHost:t}}),r=Object(ke.a)(n,2),o=r[0],s=r[1];Object(u.useEffect)((function(){s({values:{serverHost:t}})}),[t]);var d=function(){var e=Object(i.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s((function(e){return{values:Object(D.a)({},e.values,Object(m.a)({},t,a))}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return l.a.createElement(De.a,null,l.a.createElement(De.a.Input,{"data-cy":"setting-value",value:o.values.serverHost,fluid:!0,label:"Adres serwera obs\u0142uguj\u0105cego skaner",onChange:function(e,t){var a=t.value;return d("serverHost",a)}}),l.a.createElement(he.a,{"data-cy":"setting-save",onClick:function(){return a(Ke.update({name:"serverHost",value:o.values.serverHost}))},positive:!0},"Zapisz"))},tt=function(){var e=Object(h.b)();Object(u.useEffect)((function(){e(Ke.list())}),[e]);var t=Object(h.c)(Qe).serverHost;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Oe.a,{"data-cy":"settings-list",as:"h2"},l.a.createElement(p.a,{name:"group"}),l.a.createElement(Oe.a.Content,null,"Ustawienia",l.a.createElement(Oe.a.Subheader,null,"Konfiguracja systemu"))),t&&l.a.createElement(et,{serverHost:t}))},at=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(be,null),l.a.createElement("div",{style:{margin:"2em"}},l.a.createElement(Ee,{map:{ADD_PATIENT:l.a.createElement(He,null),ADD_APPOINTMENT:l.a.createElement(Le,null),PATIENT_DETAILS:l.a.createElement(Ue,null),APPOINTMENT_DETAILS:l.a.createElement(We,null),PATIENT:l.a.createElement(ye,null),APPOINTMENT:l.a.createElement(Re,null),SETTINGS:l.a.createElement(tt,null),_default:l.a.createElement("p",null,"_default")}})),l.a.createElement(g,null))},nt=1,rt={fulfilled:{type:"success",add:"Nowy wpis zosta\u0142 zapisany",update:"Zmiany zosta\u0142y zapisane",remove:"Wpis zosta\u0142 usuni\u0119ty",patients:{add:"Dane nowego pacjenta zosta\u0142y zapisane"}},rejected:{type:"error",add:"Nie uda\u0142o si\u0119 zapisa\u0107 danych",update:"Nie uda\u0142o si\u0119 zapisa\u0107 zmian",remove:"Nie uda\u0142o si\u0119 usun\u0105\u0107 wpisu",list:"Nie uda\u0142o si\u0119 pobra\u0107 listy"}},ct=function(e){var t=e.dispatch;return function(e){return function(){var a=Object(i.a)(c.a.mark((function a(n){var r,i,u,l,o,s,m,d,p;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(l=n.type.match(/^([a-z]+)\/([a-z]+)\/([a-z]+)$/)){a.next=3;break}return a.abrupt("return",e(n));case 3:return o=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";t(E.add({id:nt,type:a,text:e})),setTimeout((function(e){t(E.remove(e))}),3e3,nt),nt++},s=Object(ke.a)(l,4),s[0],m=s[1],d=s[2],p=s[3],(null===(r=rt[p])||void 0===r||null===(i=r[m])||void 0===i?void 0:i[d])?o(rt[p][m][d],rt[p].type):(null===(u=rt[p])||void 0===u?void 0:u[d])&&o(rt[p][d],rt[p].type),a.abrupt("return",e(n));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},it=Object(v.a)({reducer:{navigation:fe,patients:V,appointments:se,settings:Xe,flash:j},middleware:[].concat(Object(f.a)(Object(v.e)()),[ct])});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(h.a,{store:it},l.a.createElement(at,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),window.Cypress&&(window.resetApp=Object(i.a)(c.a.mark((function e(){var t,a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new T.a("patients"),e.next=3,t.destroy();case 3:return a=new T.a("appointments"),e.next=6,a.destroy();case 6:return n=new T.a("settings"),e.next=9,n.destroy();case 9:case"end":return e.stop()}}),e)}))))}},[[417,1,2]]]);
//# sourceMappingURL=main.7c5713c4.chunk.js.map