(this["webpackJsonpphysio-client-2-rtk"]=this["webpackJsonpphysio-client-2-rtk"]||[]).push([[0],{427:function(e,t,a){e.exports=a(715)},434:function(e,t,a){},499:function(e,t){},715:function(e,t,a){"use strict";a.r(t);var n,r=a(14),c=a.n(r),i=a(22),u=a(0),l=a.n(u),o=a(73),s=a.n(o),d=(a(433),a(15)),m=a(757),p=a(42),f=(a(434),a(224)),v=a(25),b=Object(v.d)({name:"flash",initialState:[],reducers:{add:{reducer:function(e,t){var a=t.payload;return[].concat(Object(f.a)(e),[a])}},remove:function(e,t){var a=t.payload;return e.filter((function(e){return e.id!==a}))}}}),E=b.actions,j=b.reducer,O=function(e){return e.flash},h=a(20),g=function(){var e=Object(h.c)(O),t=Object(h.b)();if(!e)return null;var a={info:{label:"Informacja",icon:"info"},success:{label:"Sukces!",icon:"check"},error:{label:"B\u0142\u0105d!",icon:"times"},warning:{label:"Ostrze\u017cenie",icon:"warning"}};return l.a.createElement("div",{className:"Flash"},e.map((function(e){var n=e.id,r=e.type,c=e.text;return l.a.createElement(m.a,Object.assign({onDismiss:function(){return t(E.remove(n))},icon:!0,key:n,floating:!0},Object(d.a)({},r,!0)),l.a.createElement(p.a,{name:a[r].icon}),l.a.createElement(m.a.Content,null,l.a.createElement(m.a.Header,null,a[r].label),c))})))},y=a(382),w=a(718),k=a(76),x=a.n(k),C=a(26),I=a(48),D=a(380),z=a.n(D),A=a(223),T=a(33),P=a.n(T),_=a(381),S=a.n(_);I.a.plugin(A.a);var N=new I.a("scans");N.createIndex({index:{fields:["order"]}}),N.createIndex({index:{fields:["patientId"]}});var H=Object(v.b)("scans/list",function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.appointmentId,n=t.patientId,e.next=3,N.find({sort:[{order:"desc"}],selector:a?{patientId:n,appointmentId:a,order:{$exists:!0}}:{patientId:n,order:{$exists:!0}}});case 3:return r=e.sent,e.abrupt("return",r.docs);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M=Object(v.b)("scans/add",function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=C.a,e.next=3,N.info();case 3:return e.t1=e.sent.doc_count,e.t2=P()().format("YYYY-MM-DD @ HH:mm"),e.t3={order:e.t1,date:e.t2},e.t4=S()(t,["mesh"]),a=(0,e.t0)(e.t3,e.t4),e.next=10,N.post(a);case 10:return n=e.sent,r=n.id,i=n.rev,e.next=15,N.putAttachment(r,"scan.ply",i,new Blob([t.mesh],{type:"application/octet-stream"}),"application/octet-stream");case 15:return e.abrupt("return",Object(C.a)(Object(C.a)({},a),{},{_id:r}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y=Object(v.b)("scans/update",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.put(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=Object(v.b)("scans/details",function(){var e=Object(i.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.dispatch,e.prev=1,e.next=4,N.get(t,{attachments:!0});case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),R=Object(v.b)("scans/load",function(){var e=Object(i.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.dispatch,e.prev=1,e.next=4,N.get(t,{attachments:!0});case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}());function L(e){return B.apply(this,arguments)}function B(){return(B=Object(i.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.find({limit:1,sort:[{order:"desc"}],selector:{patientId:t,order:{$exists:!0}}});case 2:if(!(a=e.sent).docs[0]){e.next=5;break}return e.abrupt("return",N.get(a.docs[0]._id,{attachments:!0}));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U,W=Object(v.b)("scans/edit",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.get(t,{attachments:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G=Object(v.b)("scans/remove",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.remove(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Z=Object(v.c)({selectId:function(e){return e._id}}),$=Object(v.d)({name:"scans",initialState:Z.getInitialState({loading:!1,current:void 0,error:null,loadedScans:{}}),reducers:{add:Z.addOne,update:Z.updateOne,remove:Z.removeOne},extraReducers:(n={},Object(d.a)(n,H.pending,(function(e){e.loading=!0})),Object(d.a)(n,H.fulfilled,(function(e,t){var a=t.payload;Z.setAll(e,a),e.loading=!1})),Object(d.a)(n,F.pending,(function(e){e.current=void 0,e.loading=!0})),Object(d.a)(n,R.pending,(function(e){e.loading=!0})),Object(d.a)(n,R.fulfilled,(function(e,t){var a=t.payload;console.info({payload:a}),e.loadedScans[a._id]=a,e.loading=!1})),Object(d.a)(n,F.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(d.a)(n,W.pending,(function(e){e.current=void 0,e.loading=!0})),Object(d.a)(n,W.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(d.a)(n,M.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(d.a)(n,Y.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(d.a)(n,G.fulfilled,(function(e){e.current=void 0})),n)}),J={update:Y,add:M,remove:G,list:H,details:F,editScan:W,load:R},V=Object(C.a)(Object(C.a)({current:function(e){return e.scans.current},loading:function(e){return e.scans.loading}},Z.getSelectors((function(e){return e.scans}))),{},{loadedScans:function(e){return e.scans.loadedScans}}),q=$.reducer,K=a(157);I.a.plugin(A.a);var Q=new I.a("appointments");Q.createIndex({index:{fields:["visitDate"]}}),Q.createIndex({index:{fields:["patientId"]}});var X=Object(v.b)("appointments/list",function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n,r,i,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.patientId,e.next=3,Q.find({selector:{patientId:a}});case 3:if(n=e.sent,!a){e.next=6;break}return e.abrupt("return",n.docs);case 6:r=[],i=Object(K.a)(n.docs),e.prev=8,i.s();case 10:if((u=i.n()).done){e.next=24;break}return l=u.value,e.t0=r,e.t1=C.a,e.t2=Object(C.a)({},l),e.t3={},e.next=18,Ee.load(l.patientId);case 18:e.t4=e.sent,e.t5={patient:e.t4},e.t6=(0,e.t1)(e.t2,e.t3,e.t5),e.t0.push.call(e.t0,e.t6);case 22:e.next=10;break;case 24:e.next=29;break;case 26:e.prev=26,e.t7=e.catch(8),i.e(e.t7);case 29:return e.prev=29,i.f(),e.finish(29);case 32:return e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,null,[[8,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()),ee=Object(v.b)("appointments/add",function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.post(t);case 2:return a=e.sent,n=a.id,e.abrupt("return",Object(C.a)(Object(C.a)({},t),{},{_id:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),te=Object(v.b)("appointments/update",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.put(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ae=Object(v.b)("appointments/details",function(){var e=Object(i.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dispatch,e.next=3,Q.get(t,{attachments:!1});case 3:return r=e.sent,n(Ae.set(r.patientId)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(i.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.find({sort:[{visitDate:"desc"}],limit:1,selector:{patientId:t,visitDate:{$exists:!0}}});case 3:return a=e.sent,console.info(a),e.abrupt("return",a.docs[0]||null);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var ce,ie=Object(v.b)("appointments/edit",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q.get(t,{attachments:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ue=Object(v.b)("appointments/remove",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q.remove(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),le=Object(v.c)({sortComparer:function(e,t){return t.visitDate.localeCompare(e.visitDate)},selectId:function(e){return e._id}}),oe=Object(v.d)({name:"appointments",initialState:le.getInitialState({loading:!1,current:void 0,error:null}),reducers:{newAppointment:function(e){e.current=void 0},add:le.addOne,update:le.updateOne,remove:le.removeOne},extraReducers:(U={},Object(d.a)(U,X.pending,(function(e){e.loading=!0})),Object(d.a)(U,X.fulfilled,(function(e,t){var a=t.payload;le.setAll(e,a),e.loading=!1})),Object(d.a)(U,ae.pending,(function(e){e.current=void 0,e.loading=!0})),Object(d.a)(U,ae.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(d.a)(U,ie.pending,(function(e){e.current=void 0,e.loading=!0})),Object(d.a)(U,ie.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(d.a)(U,ee.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(d.a)(U,te.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(d.a)(U,ue.fulfilled,(function(e,t){t.payload;e.current=void 0})),U)}),se={update:te,add:ee,remove:ue,list:X,details:ae,editAppointment:ie,newAppointment:oe.actions.newAppointment},de=Object(C.a)({current:function(e){return e.appointments.current},loading:function(e){return e.appointments.loading}},le.getSelectors((function(e){return e.appointments}))),me=oe.reducer,pe=new I.a("patients");function fe(){return(fe=Object(i.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.allDocs({include_docs:!0,attachments:!1,keys:t});case 2:return a=e.sent,e.abrupt("return",t.map((function(e){return a.rows.map((function(e){return e.doc})).find((function(t){var a=t._id;return e===a}))})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ve,be,Ee=new z.a((function(e){return fe.apply(this,arguments)})),je=Object(v.b)("patients/destroy",Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.destroy());case 1:case"end":return e.stop()}}),e)})))),Oe=Object(v.b)("patients/list",Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.allDocs({include_docs:!0,attachments:!1});case 2:return t=e.sent,e.abrupt("return",t.rows.map((function(e){return e.doc})));case 4:case"end":return e.stop()}}),e)})))),he=Object(v.b)("patients/add",function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.post(t);case 2:return a=e.sent,n=a.id,e.abrupt("return",Object(C.a)(Object(C.a)({},t),{},{_id:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ge=Object(v.b)("patients/update",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.put(t);case 2:return Ee.clear(t._id),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ye=Object(v.b)("patients/details",function(){var e=Object(i.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.get(t,{attachments:!1});case 2:return a=e.sent,e.t0=C.a,e.t1=Object(C.a)({},a),e.t2={},e.next=8,ne(t);case 8:return e.t3=e.sent,e.next=11,L(t);case 11:return e.t4=e.sent,e.t5={lastAppointment:e.t3,lastScan:e.t4},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t5));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),we=Object(v.b)("patients/set",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.get(t,{attachments:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ke=Object(v.b)("patients/edit",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pe.get(t,{attachments:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),xe=Object(v.b)("patients/remove",function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ee.clear(t._id),e.abrupt("return",pe.remove(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ce=Object(v.c)({sortComparer:function(e,t){return e.surname.localeCompare(t.surname)},selectId:function(e){return e._id}}),Ie=Object(v.d)({name:"patients",initialState:Ce.getInitialState({loading:!1,current:void 0,error:null}),reducers:{reset:function(e){e.current=void 0},newPatient:function(e){e.current=void 0},add:Ce.addOne,update:Ce.updateOne,remove:Ce.removeOne},extraReducers:(ce={},Object(d.a)(ce,Oe.pending,(function(e){e.loading=!0})),Object(d.a)(ce,Oe.fulfilled,(function(e,t){var a=t.payload;Ce.setAll(e,a),e.loading=!1,e.current=void 0})),Object(d.a)(ce,ye.pending,(function(e){e.current=void 0,e.loading=!0})),Object(d.a)(ce,ye.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(d.a)(ce,ke.pending,(function(e){e.current=void 0,e.loading=!0})),Object(d.a)(ce,ke.fulfilled,(function(e,t){var a=t.payload;e.current=a,e.loading=!1})),Object(d.a)(ce,he.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(d.a)(ce,we.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(d.a)(ce,ge.fulfilled,(function(e,t){var a=t.payload;e.current=a})),Object(d.a)(ce,xe.fulfilled,(function(e,t){t.payload;e.current=void 0})),ce)}),De=Ie.actions,ze=De.newPatient,Ae={reset:De.reset,set:we,update:ge,add:he,remove:xe,list:Oe,details:ye,editPatient:ke,newPatient:ze,destroy:je},Te=Object(C.a)({current:function(e){return e.patients.current},loading:function(e){return e.patients.loading}},Ce.getSelectors((function(e){return e.patients}))),Pe=Ie.reducer,_e=Object(v.d)({name:"navigation",initialState:"PATIENT",reducers:{navigate:function(e,t){return t.payload}},extraReducers:(ve={},Object(d.a)(ve,Ae.newPatient,(function(){return"ADD_PATIENT"})),Object(d.a)(ve,se.newAppointment,(function(){return"ADD_APPOINTMENT"})),Object(d.a)(ve,Ae.editPatient.fulfilled,(function(){return"ADD_PATIENT"})),Object(d.a)(ve,se.editAppointment.fulfilled,(function(){return"ADD_APPOINTMENT"})),Object(d.a)(ve,Ae.remove.fulfilled,(function(){return"PATIENT"})),Object(d.a)(ve,se.remove.fulfilled,(function(){return"PATIENT_DETAILS"})),Object(d.a)(ve,Ae.update.fulfilled,(function(){return"PATIENT_DETAILS"})),Object(d.a)(ve,se.update.fulfilled,(function(){return"APPOINTMENT_DETAILS"})),Object(d.a)(ve,Ae.add.fulfilled,(function(){return"PATIENT_DETAILS"})),Object(d.a)(ve,se.add.fulfilled,(function(){return"APPOINTMENT_DETAILS"})),Object(d.a)(ve,se.details.pending,(function(){return"APPOINTMENT_DETAILS"})),Object(d.a)(ve,Ae.list.fulfilled,(function(){return"PATIENT"})),Object(d.a)(ve,Ae.details.pending,(function(){return"PATIENT_DETAILS"})),Object(d.a)(ve,J.details.pending,(function(){return"SCAN_DETAILS"})),ve)}),Se={navigate:_e.actions.navigate},Ne=function(e){return e.navigation},He=_e.reducer,Me=a(158),Ye=a.n(Me),Fe=a(28),Re=a.n(Fe),Le=Object(v.d)({name:"compare",initialState:{items:[]},reducers:{add:function(e,t){var a=t.payload;e.items=Ye()(e.items,[a])},remove:function(e,t){var a=t.payload;e.items=Re()(e.items,a)},clear:function(e,t){t.payload;e.items=[]}}}),Be=Le.actions,Ue=function(e){return e.compare.items},We=function(e){return e.compare.items.length},Ge=Le.reducer,Ze=function(){var e=Object(h.c)(We),t=Object(h.b)();return l.a.createElement(y.a.Item,{disabled:!e,name:"Por\xf3wnaj (".concat(e,")"),onClick:function(){return t(Se.navigate("COMPARE"))}})},$e=a(274),Je=a(759),Ve=a(68),qe=a(384),Ke=a(88),Qe=a(217),Xe=a(716),et=a(758),tt=function(e){var t=e.loading,a=e.scan;if(t||!a)return l.a.createElement($e.a,{style:{height:"730px"}},l.a.createElement(Xe.a,{active:!0},l.a.createElement(et.a,null)));return l.a.createElement($e.a,null,l.a.createElement(Qe.a,{mesh:function(e){for(var t=window.atob(e),a=t.length,n=new Uint8Array(a),r=0;r<a;r++)n[r]=t.charCodeAt(r);return n.buffer}(a._attachments["scan.ply"].data)}))},at=function(e){var t=e.scanId,a=Object(h.b)(),n=Object(h.c)(V.loadedScans),r=Object(h.c)(V.loading);return Object(u.useEffect)((function(){a(J.load(t))}),[a,t]),t?l.a.createElement(tt,{loading:r,scan:n[t]}):null},nt=function(){var e=Object(h.b)(),t=Object(h.c)(Ue);return t.length?l.a.createElement(l.a.Fragment,null,t.length>0&&l.a.createElement(Ve.a,{"data-cy":"new-patient",floated:"right",negative:!0,onClick:function(){return e(Be.clear())}},l.a.createElement(p.a,{name:"trash"})," Wyczy\u015b\u0107 wszystkie"),l.a.createElement(Je.a,{as:"h2"},l.a.createElement(p.a,{name:"group"}),l.a.createElement(Je.a.Content,null,"Por\xf3wnanie bada\u0144",l.a.createElement(Je.a.Subheader,null,"Zsynchronizowane"))),l.a.createElement(Qe.b,null,l.a.createElement(qe.a,{columns:"3"},t.map((function(t){return l.a.createElement(Ke.a,{key:t},l.a.createElement(at,{scanId:t}),l.a.createElement(Ve.a,{negative:!0,onClick:function(a){a.stopPropagation(),e(Be.remove(t))}},l.a.createElement(p.a,{name:"trash"}),"Usu\u0144 z por\xf3wnania"))}))))):l.a.createElement($e.a,{placeholder:!0},l.a.createElement(Je.a,{icon:!0},l.a.createElement(p.a,{name:"search"}),"Lista skan\xf3w do por\xf3wnania jest pusta."))},rt=function(){var e=Object(h.c)(Ne),t=Object(h.b)();return l.a.createElement(y.a,{"data-cy":"navigation",size:"massive",pointing:!0},[{name:"Pacjenci",values:["PATIENT","EDIT_PATIENT"]},{name:"Wizyty",values:["APPOINTMENT"]},{name:"Ustawienia",values:["SETTINGS"]}].map((function(a){var n=a.name,r=a.values;return l.a.createElement(y.a.Item,{"data-cy":"top-navigation-".concat(r[0]),key:n,name:n,active:-1!==x.a.indexOf(r,e),onClick:function(){t(Ae.reset()),t(Se.navigate(r[0]))}})})),l.a.createElement(y.a.Menu,{position:"right"},l.a.createElement(Ze,null),l.a.createElement(y.a.Item,null,l.a.createElement(w.a,{icon:"search",placeholder:"Szukaj..."}))))},ct=function(e){var t=e.map,a=Object(h.c)(Ne);return t[a]?t[a]:t._default||null},it=a(760),ut=a(92),lt=function(){var e=Object(h.b)(),t=Object(h.c)(Te.selectAll),a=Object(h.c)(Te.loading);if(Object(u.useEffect)((function(){e(Ae.list())}),[e]),!t.length)return l.a.createElement($e.a,{placeholder:!0,loading:a},l.a.createElement(Je.a,{icon:!0},l.a.createElement(p.a,{name:"user md"}),"Jeszcze nie zarejestrowano \u017cadnego pacjenta"),l.a.createElement(Ve.a,{"data-cy":"new-patient-hero",primary:!0,onClick:function(){return e(Ae.newPatient())}},l.a.createElement(p.a,{name:"add user"})," Dodaj pacjenta"));var n,r="";return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ve.a,{"data-cy":"new-patient",floated:"right",primary:!0,onClick:function(){return e(Ae.newPatient())}},l.a.createElement(p.a,{name:"add user"})," Dodaj pacjenta"),l.a.createElement(Je.a,{as:"h2"},l.a.createElement(p.a,{name:"group"}),l.a.createElement(Je.a.Content,null,"Pacjenci",l.a.createElement(Je.a.Subheader,null,t.length," rekord\xf3w"))),l.a.createElement(it.a,{singleLine:!0,selectable:!0,padded:!0},l.a.createElement(it.a.Header,null,l.a.createElement(it.a.Row,null,l.a.createElement(it.a.HeaderCell,null,"Imi\u0119 i Nazwisko"),l.a.createElement(it.a.HeaderCell,null,"Data urodzenia"),l.a.createElement(it.a.HeaderCell,null,"Inne informacje"))),l.a.createElement(it.a.Body,null,t.map((function(t){var a=t._id,c=t.name,i=t.surname,u=t.birthDate,o=t.comment;return i&&r!==i[0].toUpperCase()?(r=i[0].toUpperCase(),n=l.a.createElement(ut.a,{ribbon:!0},i[0].toUpperCase())):n=null,l.a.createElement(it.a.Row,{"data-cy":"data-name-cell",onClick:function(){return e(Ae.details(a))},key:a},l.a.createElement(it.a.Cell,null,n,l.a.createElement("span",null,c," ",i)),l.a.createElement(it.a.Cell,null,u),l.a.createElement(it.a.Cell,null,o))})))))},ot=a(54),st=a(225),dt=a(761),mt=a(220),pt=a(67),ft=a(114),vt=a(385),bt=a.n(vt),Et=function(){function e(t){Object(pt.a)(this,e),this.schema=t}return Object(ft.a)(e,[{key:"validate",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n,r,i,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={},n=x.a.keys(this.schema),r=0;case 3:if(!(r<n.length)){e.next=18;break}i=[],u=0;case 6:if(!(u<this.schema[n[r]].length)){e.next=14;break}return e.next=9,this.test(this.schema[n[r]][u].test,t[n[r]],t);case 9:(!(l=e.sent)||x.a.isObject(l)&&!l.result)&&i.push(x.a.isObject(l)&&l.message?l.message:this.schema[n[r]][u].message);case 11:u++,e.next=6;break;case 14:i.length&&(a[n[r]]=i[0]);case 15:r++,e.next=3;break;case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"test",value:function(){var e=Object(i.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x.a.isFunction(t)){e.next=5;break}return e.next=3,t(a,n);case 3:return r=e.sent,e.abrupt("return",r);case 5:return e.abrupt("return",bt.a[t](a));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()}]),e}(),jt=function(e){var t=e.errors;return l.a.createElement(l.a.Fragment,null,!!Object.keys(t).length&&l.a.createElement(m.a,{negative:!0},l.a.createElement(m.a.Header,{"data-cy":"validation-error-message"},"Formularz zawiera b\u0142\u0119dy"),l.a.createElement("ul",null,Object.values(t).map((function(e,t){return l.a.createElement("li",{key:t},e)})))))},Ot=function(){var e=Object(h.b)(),t=Object(h.c)(Te.current),a={name:"",surname:"",birthDate:"",comment:""},n="",r="";if(void 0!==t){var o=t;n=o._id,r=o._rev,a=Object(st.a)(o,["_id","_rev"])}var s=new Et({name:[{test:function(e){return e.length>1},message:"Imi\u0119 musi mie\u0107 przynajmniej dwa znaki"}],surname:[{test:function(e){return e.length>1},message:"Nazwisko musi mie\u0107 przynajmniej dwa znaki"}],birthDate:[{test:function(e){return""===e||P()(e,"YYYY-MM-DD").isValid()},message:"Wpisz poprawn\u0105 dat\u0119"}]}),m=Object(u.useState)({errors:{},values:a}),f=Object(ot.a)(m,2),v=f[0],b=f[1];Object(u.useEffect)((function(){b({errors:{},values:t||a})}),[t]);var E=function(){var e=Object(i.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b((function(e){return{values:Object(C.a)(Object(C.a)({},e.values),{},Object(d.a)({},t,a)),errors:Object(C.a)({},x.a.omit(e.errors,[t]))}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var a=Object(i.a)(c.a.mark((function a(){var i;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.validate(v.values);case 2:if(i=a.sent,x.a.isEmpty(i)){a.next=6;break}return b((function(e){return{values:Object(C.a)({},e.values),errors:i}})),a.abrupt("return");case 6:e(void 0===t?Ae.add(v.values):Ae.update(Object(C.a)({_id:n,_rev:r},v.values)));case 7:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return l.a.createElement(dt.a,null,l.a.createElement(qe.a,{columns:"3"},l.a.createElement(qe.a.Row,{divided:!0},l.a.createElement(qe.a.Column,{width:"6"},l.a.createElement(dt.a.Input,{error:!!v.errors.name,"data-cy":"first_name",value:v.values.name,fluid:!0,label:"Imi\u0119",placeholder:"Imi\u0119",onChange:function(e,t){return E("name",t.value)}})),l.a.createElement(qe.a.Column,{width:"5"},l.a.createElement(dt.a.Input,{error:!!v.errors.surname,"data-cy":"last_name",value:v.values.surname,fluid:!0,label:"Nazwisko",placeholder:"Nazwisko",onChange:function(e,t){return E("surname",t.value)}})),l.a.createElement(qe.a.Column,{width:"5"},l.a.createElement(dt.a.Field,{error:!!v.errors.birthDate},l.a.createElement("label",null,"Data urodzenia"),l.a.createElement(mt.DateInput,{duration:0,closable:!0,closeOnMouseLeave:!0,clearable:!0,dateFormat:"YYYY-MM-DD",localization:"pl",startMode:"year",name:"birthDate",placeholder:"Data urodzenia",value:v.values.birthDate,iconPosition:"right",popupPosition:"bottom right",onClear:function(){return E("birthDate","")},onChange:function(e,t){var a=t.value,n=t.format;if(a){var r=P()(a,n);r.isValid()?E("birthDate",r.format("YYYY-MM-DD")):E("birthDate","")}}})))),l.a.createElement(qe.a.Column,{width:"10"},l.a.createElement(dt.a.TextArea,{"data-cy":"description",value:v.values.comment,label:"Inne informacje",placeholder:"Inne informacje",onChange:function(e,t){return E("comment","".concat(t.value))}}))),l.a.createElement(jt,{errors:v.errors}),l.a.createElement(qe.a,null,l.a.createElement(qe.a.Row,{columns:"2"},l.a.createElement(qe.a.Column,null,l.a.createElement(Ve.a.Group,null,l.a.createElement(Ve.a,{"data-cy":"patient-save-button",onClick:j,positive:!0},"Zapisz"),l.a.createElement(Ve.a.Or,{text:"lub"}),l.a.createElement(Ve.a,{"data-cy":"patient-cancel-button",onClick:function(){return e(Se.navigate("PATIENT"))}},"Anuluj"))),t&&l.a.createElement(qe.a.Column,{textAlign:"right"},l.a.createElement(Ve.a,{"data-cy":"patient-delete-button",negative:!0,onClick:function(){e(Ae.remove(t))}},l.a.createElement(p.a,{name:"trash"})," Usu\u0144")))))},ht=a(762),gt=a(125),yt=function(){var e=Object(h.b)(),t=Object(h.c)(Te.current),a=Object(h.c)(de.selectAll);return Object(u.useEffect)((function(){e(se.list({patientId:null===t||void 0===t?void 0:t._id}))}),[e,t]),a.length?l.a.createElement(l.a.Fragment,null,!t&&l.a.createElement(Je.a,{as:"h2"},l.a.createElement(p.a,{name:"group"}),l.a.createElement(Je.a.Content,null,"Wizyty",l.a.createElement(Je.a.Subheader,null,a.length," rekord\xf3w"))),l.a.createElement(it.a,{"data-cy":"appointment-list",padded:!0,selectable:!0,fixed:!0},l.a.createElement(it.a.Header,null,l.a.createElement(it.a.Row,null,!t&&l.a.createElement(it.a.HeaderCell,null,"Pacjent"),l.a.createElement(it.a.HeaderCell,{width:5},"Data i godzina wizyty"),l.a.createElement(it.a.HeaderCell,{width:7},"Inne informacje"))),l.a.createElement(it.a.Body,null,a.map((function(a){var n=a._id,r=a.interview,c=a.visitDate,i=a.patient;return l.a.createElement(it.a.Row,{onClick:function(){e(se.details(n))},key:n},!t&&l.a.createElement(it.a.Cell,{verticalAlign:"top"},i&&"".concat(i.name," ").concat(i.surname)),l.a.createElement(it.a.Cell,{verticalAlign:"top"},c),l.a.createElement(it.a.Cell,null,r))}))))):l.a.createElement($e.a,{placeholder:!0},l.a.createElement(Je.a,{icon:!0},l.a.createElement(p.a,{name:"user md"}),"Jeszcze nie zarejestrowano \u017cadnej wizyty"))},wt=function(){var e=Object(h.b)(),t=Object(h.c)(de.current),a=Object(h.c)(Te.current),n={patientId:a._id,interview:"",visitDate:P()().format("YYYY-MM-DD @ HH:mm")},r="",o="";if(void 0!==t){var s=t;r=s._id,o=s._rev,n=Object(st.a)(s,["_id","_rev"])}var m=Object(u.useState)({values:n}),f=Object(ot.a)(m,2),v=f[0],b=f[1],E=function(){var e=Object(i.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b((function(e){return{values:Object(C.a)(Object(C.a)({},e.values),{},Object(d.a)({},t,a))}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var a=Object(i.a)(c.a.mark((function a(){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",e(void 0===t?se.add(v.values):se.update(Object(C.a)({_id:r,_rev:o},v.values))));case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,a&&l.a.createElement(Je.a,{as:"h2"},l.a.createElement(p.a,{name:"user circle"}),l.a.createElement(Je.a.Content,null,a.name," ",a.surname,l.a.createElement(Je.a.Subheader,null,"Nowa wizyta"))),l.a.createElement(dt.a,null,l.a.createElement(dt.a.Field,null,l.a.createElement("label",null,"Data wizyty"),l.a.createElement(mt.DateTimeInput,{duration:0,name:"visitDate",closable:!0,closeOnMouseLeave:!0,dateFormat:"YYYY-MM-DD @ HH:mm",localization:"pl",placeholder:"Data wizyty",value:v.values.visitDate,iconPosition:"right",popupPosition:"bottom right",onChange:function(e,t){var a=t.value;if(a){var n=P()(a,"YYYY-MM-DD @ HH:mm");n.isValid()?E("visitDate",n.format("YYYY-MM-DD @ HH:mm")):E("visitDate","")}}})),l.a.createElement(dt.a.TextArea,{autoFocus:!0,"data-cy":"description",value:v.values.interview,label:"Inne informacje",placeholder:"Inne informacje",onChange:function(e,t){return E("interview","".concat(t.value))}}),l.a.createElement(qe.a,null,l.a.createElement(qe.a.Row,{columns:"2"},l.a.createElement(qe.a.Column,null,l.a.createElement(Ve.a.Group,null,l.a.createElement(Ve.a,{"data-cy":"appointment-save-button",onClick:j,positive:!0},"Zapisz"),l.a.createElement(Ve.a.Or,{text:"lub"}),l.a.createElement(Ve.a,{"data-cy":"appointment-cancel",onClick:function(){return e(Ae.details(a._id))}},"Anuluj"))),l.a.createElement(qe.a.Column,{textAlign:"right"},t&&l.a.createElement(Ve.a,{negative:!0,onClick:function(){e(se.remove(t))}},l.a.createElement(p.a,{name:"trash"})," Usu\u0144"))))))},kt=a(277),xt=a(269),Ct=a.n(xt),It=new I.a("settings"),Dt={all:{serverHost:"localhost",serverPort:"localhost:8080"},loading:!1},zt=Object(v.b)("settings/list",Object(i.a)(c.a.mark((function e(){var t,a,n,r,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ct()(Dt.all),a=0,n=Object.keys(Dt.all);case 2:if(!(a<n.length)){e.next=12;break}return r=n[a],e.next=6,It.find({selector:{name:r}});case 6:i=e.sent,1===(u=i.docs).length&&(t[r]=u[0].value);case 9:a++,e.next=2;break;case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e)})))),At=Object(v.b)("settings/update",function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.value,e.next=3,It.find({selector:{name:a}});case 3:if(r=e.sent,!(i=r.docs).length){e.next=10;break}return e.next=8,It.put(Object(C.a)(Object(C.a)({},i[0]),{},{value:n}));case 8:e.next=12;break;case 10:return e.next=12,It.post({name:a,value:n});case 12:return e.abrupt("return",{name:a,value:n});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Tt=Object(v.d)({name:"settings",initialState:Dt,extraReducers:(be={},Object(d.a)(be,zt.fulfilled,(function(e,t){var a=t.payload;e.all=a})),Object(d.a)(be,At.fulfilled,(function(e,t){var a=t.payload;e.all[a.name]=a.value})),Object(d.a)(be,zt.rejected,(function(e,t){console.error(t)})),be)}),Pt={list:zt,update:At},_t=function(e){return e.settings.all},St=Tt.reducer,Nt=1,Ht={fulfilled:{type:"success",add:"Nowy wpis zosta\u0142 zapisany",update:"Zmiany zosta\u0142y zapisane",remove:"Wpis zosta\u0142 usuni\u0119ty",patients:{add:"Dane nowego pacjenta zosta\u0142y zapisane"}},rejected:{type:"error",add:"Nie uda\u0142o si\u0119 zapisa\u0107 danych",update:"Nie uda\u0142o si\u0119 zapisa\u0107 zmian",remove:"Nie uda\u0142o si\u0119 usun\u0105\u0107 wpisu",list:"Nie uda\u0142o si\u0119 pobra\u0107 listy"}},Mt=function(e){var t=e.dispatch;return function(e){return function(){var a=Object(i.a)(c.a.mark((function a(n){var r,i,u,l,o,s,d,m,p;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(l=n.type.match(/^([a-z]+)\/([a-z]+)\/([a-z]+)$/)){a.next=3;break}return a.abrupt("return",e(n));case 3:return o=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";t(E.add({id:Nt,type:a,text:e})),setTimeout((function(e){t(E.remove(e))}),3e3,Nt),Nt++},s=Object(ot.a)(l,4),s[0],d=s[1],m=s[2],p=s[3],(null===(r=Ht[p])||void 0===r||null===(i=r[d])||void 0===i?void 0:i[m])?o(Ht[p][d][m],Ht[p].type):(null===(u=Ht[p])||void 0===u?void 0:u[m])&&o(Ht[p][m],Ht[p].type),a.abrupt("return",e(n));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},Yt=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success";e(E.add({id:Nt,type:a,text:t})),setTimeout((function(t){e(E.remove(t))}),3e3,Nt),Nt++},Ft=a(24),Rt=a.n(Ft),Lt=function(e){var t=e.appointment,a=e.patient,n=e.onScanComplete,r=Object(u.useState)("checking"),o=Object(ot.a)(r,2),s=o[0],d=o[1],m=Object(h.c)(_t),f=m.serverHost,v=m.serverPort,b=Object(h.b)(),E=new kt.a(f,v,!1);return E.getStatus().then((function(e){e.arduino_ready&&d("ready")}),(function(e){Rt()(e)&&e.forEach((function(e){Yt(b,"B\u0142\u0105d po\u0142\u0105czenia ze skanerem: "+e.msg,"error"),d("connection-error")}))})),l.a.createElement(Ve.a,{disabled:"checking"===s||"busy"===s,primary:"ready"===s||"busy"===s,negative:"connection-error"===s,onClick:function(){d("busy");var e=kt.a.prepareStandardScanId(a.surname+a.name);E.scan(e).then(function(){var e=Object(i.a)(c.a.mark((function e(r){var i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d("busy"),e.next=3,b(J.add({patientId:a._id,appointmentId:t._id,mesh:r}));case 3:i=e.sent,u=i.payload._id,n(u);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){d("error"),Rt()(e)&&e.forEach((function(e){Yt(b,"B\u0142\u0105d skanowania: "+e.msg,"warning")}))}))}},l.a.createElement(p.a,{name:"video camera"}),{checking:"\u0141\u0105czenie ze skanerem...",ready:"Nowe badanie",error:"B\u0142\u0105d skanowania","connection-error":"Brak po\u0142\u0105czenia",busy:"Skanuj\u0119..."}[s])},Bt=a(410),Ut=a.n(Bt),Wt=function(){var e=Object(h.b)(),t=Object(h.c)(Te.current),a=Object(h.c)(de.current),n=Object(h.c)(V.selectAll),r=Object(h.c)(Ue);return Object(u.useEffect)((function(){e(J.list({patientId:t._id,appointmentId:null===a||void 0===a?void 0:a._id}))}),[e,t,a]),n.length?l.a.createElement(l.a.Fragment,null,!t&&l.a.createElement(Je.a,{as:"h2"},l.a.createElement(p.a,{name:"group"}),l.a.createElement(Je.a.Content,null,"Badania",l.a.createElement(Je.a.Subheader,null,n.length," rekord\xf3w"))),l.a.createElement(it.a,{"data-cy":"appointment-list",padded:!0,selectable:!0,fixed:!0},l.a.createElement(it.a.Header,null,l.a.createElement(it.a.Row,null,l.a.createElement(it.a.HeaderCell,null,"Nr badania"),l.a.createElement(it.a.HeaderCell,null,"Data i godzina"),l.a.createElement(it.a.HeaderCell,null,"Notatki"),l.a.createElement(it.a.HeaderCell,null,"Por\xf3wnanie"))),l.a.createElement(it.a.Body,null,n.map((function(t){var a=t._id,n=t.date,c=t.comment,i=(t.patientId,t.appointmentId,t.order),u=!!r.find((function(e){return e===a}));return l.a.createElement(it.a.Row,{onClick:function(){e(J.details(a))},key:a},l.a.createElement(it.a.Cell,null,i),l.a.createElement(it.a.Cell,null,n),l.a.createElement(it.a.Cell,null,Ut()(c,{length:32,separator:"..."})),l.a.createElement(it.a.Cell,{className:""},u?l.a.createElement(Ve.a,{negative:!0,onClick:function(t){t.stopPropagation(),e(Be.remove(a))}},l.a.createElement(p.a,{name:"trash"}),"Usu\u0144 z por\xf3wnania"):l.a.createElement(Ve.a,{positive:!0,onClick:function(t){t.stopPropagation(),e(Be.add(a))}},l.a.createElement(p.a,{name:"plus circle"}),"Dodaj do por\xf3wnania")))}))))):l.a.createElement($e.a,{placeholder:!0},l.a.createElement(Je.a,{icon:!0},l.a.createElement(p.a,{name:"user md"}),"Jeszcze nie zarejestrowano \u017cadnego badania"))},Gt=function(){var e=Object(h.c)(Te.current),t=Object(h.c)(de.current),a=Object(h.b)();return e&&t?l.a.createElement(l.a.Fragment,null,l.a.createElement(Ve.a.Group,{floated:"right"},l.a.createElement(Lt,{onScanComplete:function(e){a(J.details(e))},appointment:t,patient:e}),l.a.createElement(gt.a,{"data-cy":"dropdown",onChange:function(){a(se.editAppointment(t._id))},className:"button icon",options:[{key:"edit",icon:"edit",text:"Modyfikuj",value:"edit"}],trigger:l.a.createElement(l.a.Fragment,null)})),l.a.createElement(Je.a,{as:"h2"},l.a.createElement(p.a,{name:"user circle"}),l.a.createElement(Je.a.Content,{"data-cy":"appointment-details"},"Wizyta ",t.visitDate,l.a.createElement(Je.a.Subheader,null,e.name," ",e.surname))),l.a.createElement($e.a,{"data-cy":"appointment-description"},t.interview.split("\n").map((function(e,t){return l.a.createElement("p",{key:t},e)}))),l.a.createElement(Wt,null),l.a.createElement(Ve.a,{"data-cy":"navigate-back",onClick:function(){return a(Ae.details(e._id))},basic:!0},l.a.createElement(p.a,{name:"arrow left"})," wr\xf3\u0107 do szczeg\xf3\u0142\xf3w pacjenta")):null},Zt=function(e){var t=e.scan,a=Object(h.b)(),n=Object(u.useState)({values:t}),r=Object(ot.a)(n,2),o=r[0],s=r[1],m=Object(u.useState)(!1),p=Object(ot.a)(m,2),f=p[0],v=p[1],b=function(){var e=Object(i.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s((function(e){return{values:Object(C.a)(Object(C.a)({},e.values),{},Object(d.a)({},t,a))}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(u.useEffect)((function(){o.values.comment!==t.comment&&v(!0)}),[o]);return l.a.createElement(dt.a,null,l.a.createElement(dt.a.TextArea,{"data-cy":"comment",value:o.values.comment,label:"",placeholder:"Zapisz notatk\u0119 do badania",onChange:function(e,t){return b("comment",t.value)}}),f&&l.a.createElement(Ve.a.Group,null,l.a.createElement(Ve.a,{onClick:function(){a(J.update(o.values)),v(!1)},positive:!0},"Zapisz"),l.a.createElement(Ve.a.Or,{text:"lub"}),l.a.createElement(Ve.a,{onClick:function(){s({values:Object(C.a)(Object(C.a)({},o.values),{},{comment:t.comment})}),v(!1)}},"Anuluj")))},$t=a(763),Jt=function(){var e=Object(h.c)(V.current),t=Object(h.c)(de.current),a=Object(h.c)(Te.current),n=Object(h.b)();return e&&a&&t?l.a.createElement(ht.a,null,l.a.createElement(Ve.a.Group,{floated:"right"},l.a.createElement(Ve.a,{positive:!0,negative:!1,onClick:function(){n(Be.add(e._id))}},l.a.createElement(p.a,{name:"plus circle"}),"Dodaj do por\xf3wnania"),l.a.createElement(gt.a,{onChange:function(a,r){var c=r.value,i=document.createElement("a");switch(c){case"remove":n(J.remove(e)),n(se.details(t._id));break;case"export":i.href="data:application/octet-stream;base64,"+e._attachments["scan.ply"].data,i.download="badanie_".concat(e.order,".ply"),i.click()}},className:"button icon",options:[{keg:"export",icon:"file",text:"Zapisz do pliku",value:"export"},{key:"remove",icon:"delete",text:"Usu\u0144",value:"remove"}],trigger:l.a.createElement(l.a.Fragment,null)})),l.a.createElement(Je.a,{as:"h2"},l.a.createElement(p.a,{name:"user circle"}),l.a.createElement(Je.a.Content,null,"Badanie nr ",e.order,l.a.createElement(Je.a.Subheader,null,a.name," ",a.surname," z dnia ",e.date))),l.a.createElement(tt,{scan:e}),l.a.createElement($t.a,{section:!0}),l.a.createElement(Zt,{scan:e}),l.a.createElement($t.a,{section:!0}),l.a.createElement(Ve.a,{onClick:function(){return n(se.details(t._id))},basic:!0},l.a.createElement(p.a,{name:"arrow left"})," wr\xf3\u0107 do wizyty")):null},Vt=function(){var e=Object(h.c)(Te.current),t=Object(h.b)();return e?l.a.createElement(ht.a,null,l.a.createElement(qe.a,{columns:"equal"},l.a.createElement(qe.a.Row,null,l.a.createElement(qe.a.Column,null,l.a.createElement(Je.a,{as:"h2"},l.a.createElement(p.a,{name:"user circle"}),l.a.createElement(Je.a.Content,{"data-cy":"patient-header-content"},e.name," ",e.surname,l.a.createElement(Je.a.Subheader,null,"Szczeg\xf3\u0142y Pacjenta")))),l.a.createElement(qe.a.Column,null,l.a.createElement(Ve.a.Group,{primary:!0,floated:"right",onClick:function(){return t(se.newAppointment())}},l.a.createElement(Ve.a,{primary:!0,"data-cy":"new-appointment"},l.a.createElement(p.a,{name:"add to calendar"}),"Nowa wizyta"),l.a.createElement(gt.a,{floating:!0,"data-cy":"dropdown-button-icon",onChange:function(){t(Ae.editPatient(e._id))},className:"button icon",options:[{key:"edit",icon:"edit",text:"Modyfikuj",value:"edit"}],trigger:l.a.createElement(l.a.Fragment,null)}))))),l.a.createElement(qe.a,{divided:!0,style:{paddingTop:"0.5em"}},l.a.createElement(qe.a.Row,null,l.a.createElement(qe.a.Column,{width:7,style:{padding:"0 2em 3em 0"}},l.a.createElement("p",null,l.a.createElement("strong",null,"Data urodzenia: "),e.birthDate),l.a.createElement("p",null,l.a.createElement("strong",null,"Ostatnia wizyta: ")," ",e.lastAppointment?e.lastAppointment.visitDate:"(brak)"),l.a.createElement(Je.a,{as:"h4"},"Inne informacje:"),l.a.createElement($e.a,null,e.comment.split("\n").map((function(e,t){return l.a.createElement("p",{key:t},e)}))),l.a.createElement(Je.a,{as:"h3",style:{margin:"2em 0 1em 0"}},"Ostatnie wizyty"),l.a.createElement(yt,null)),l.a.createElement(qe.a.Column,{width:9,style:{padding:"0 0 3em 2em"}},l.a.createElement(Je.a,{as:"h4"},"Ostatnie badanie - ",e.lastScan?e.lastScan.date:"(brak)"),e.lastScan&&l.a.createElement($e.a,null,l.a.createElement(tt,{scan:e.lastScan}))))),l.a.createElement(Ve.a,{"data-cy":"back-button",onClick:function(){return t(Ae.list())},basic:!0},l.a.createElement(p.a,{name:"arrow left"})," Wr\xf3\u0107")):null},qt=function(e){var t=e.serverHost,a=e.serverPort,n=Object(h.b)(),r=Object(u.useState)({values:{serverHost:t,serverPort:a}}),o=Object(ot.a)(r,2),s=o[0],m=o[1];Object(u.useEffect)((function(){m({values:{serverHost:t,serverPort:a}})}),[t,a]);var p=function(){var e=Object(i.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m((function(e){return{values:Object(C.a)(Object(C.a)({},e.values),{},Object(d.a)({},t,a))}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return l.a.createElement(dt.a,null,l.a.createElement(dt.a.Input,{"data-cy":"setting-value",value:s.values.serverHost,fluid:!0,label:"Adres serwera obs\u0142uguj\u0105cego skaner",onChange:function(e,t){var a=t.value;return p("serverHost",a)}}),l.a.createElement(dt.a.Input,{"data-cy":"setting-value",value:s.values.serverPort,fluid:!0,label:"Port",onChange:function(e,t){var a=t.value;return p("serverPort",a)}}),l.a.createElement(Ve.a,{"data-cy":"setting-save",onClick:function(){n(Pt.update({name:"serverHost",value:s.values.serverHost})),n(Pt.update({name:"serverPort",value:s.values.serverPort}))},positive:!0},"Zapisz"))},Kt=function(){var e=Object(h.b)();Object(u.useEffect)((function(){e(Pt.list())}),[e]);var t=Object(h.c)(_t),a=t.serverHost,n=t.serverPort;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Je.a,{"data-cy":"settings-list",as:"h2"},l.a.createElement(p.a,{name:"group"}),l.a.createElement(Je.a.Content,null,"Ustawienia",l.a.createElement(Je.a.Subheader,null,"Konfiguracja systemu"))),a&&l.a.createElement(qt,{serverHost:a,serverPort:n}))},Qt=function(){var e=Object(h.b)();return Object(u.useEffect)((function(){e(Pt.list())}),[e]),l.a.createElement(l.a.Fragment,null,l.a.createElement(rt,null),l.a.createElement("div",{style:{margin:"2em"}},l.a.createElement(ct,{map:{ADD_PATIENT:l.a.createElement(Ot,null),ADD_APPOINTMENT:l.a.createElement(wt,null),PATIENT_DETAILS:l.a.createElement(Vt,null),APPOINTMENT_DETAILS:l.a.createElement(Gt,null),SCAN_DETAILS:l.a.createElement(Jt,null),COMPARE:l.a.createElement(nt,null),PATIENT:l.a.createElement(lt,null),APPOINTMENT:l.a.createElement(yt,null),SETTINGS:l.a.createElement(Kt,null),_default:l.a.createElement("p",null,"_default")}})),l.a.createElement(g,null))},Xt=Object(v.a)({reducer:{navigation:He,patients:Pe,appointments:me,settings:St,flash:j,scans:q,compare:Ge},middleware:[].concat(Object(f.a)(Object(v.e)()),[Mt])});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(h.a,{store:Xt},l.a.createElement(Qt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),window.Cypress&&(window.resetApp=Object(i.a)(c.a.mark((function e(){var t,a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new I.a("patients"),e.next=3,t.destroy();case 3:return a=new I.a("appointments"),e.next=6,a.destroy();case 6:return n=new I.a("settings"),e.next=9,n.destroy();case 9:case"end":return e.stop()}}),e)}))))}},[[427,1,2]]]);
//# sourceMappingURL=main.e04655a5.chunk.js.map